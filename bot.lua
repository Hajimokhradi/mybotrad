bot = dofile('./utils.lua')
json = dofile('./JSON.lua')
URL = require "socket.url"
serpent = require("serpent")
http = require "socket.http"
https = require "ssl.https"
redis = require('redis')
tdcli = dofile("tdcli.lua")
database = redis.connect('127.0.0.1', 6379)
BASE = '/home/api/Api/'

local NumberReturn = 12
local color = {
  black = {30, 40},
  red = {31, 41},
  green = {32, 42},
  yellow = {33, 43},
  blue = {34, 44},
  magenta = {35, 45},
  cyan = {36, 46},
  white = {37, 47}
}
----------------------------------------------------------------------------
realm_id = -1001317391844 --Realm ID
----------------------------------------------------------------------------
SUDO = 277826937 --Sudo ID
----------------------------------------------------------------------------
sudo_users = {277826937,374605882} --Sudo ID
----------------------------------------------------------------------------
BOTS = 766107304 --Bot ID
----------------------------------------------------------------------------
bot_id = 766107304 --Bot ID
----------------------------------------------------------------------------
botname = 'üáÆüá∑‚ïé‚Ä¢ –º—è.Œ±‚ÑìŒπ—è—îzŒ±'
----------------------------------------------------------------------------
sudoid = '@Alirezahm_ir'
----------------------------------------------------------------------------
botuser = '@mr_alirezabot'
----------------------------------------------------------------------------
botchannel = '@Mshd_GanG'
----------------------------------------------------------------------------
sudophone = '+989378633006'
----------------------------------------------------------------------------
pvresan = '@Bot_mebot'
----------------------------------------------------------------------------
supportgp = 'https://t.me/joinchat/AAAAAEHx2zRaY9qWzRqOfg'
----------------------------------------------------------------------------
function vardump(value)
print(serpent.block(value, {comment=false}))
end
----------------------------------------------------------------------------
function dl_cb(arg, data)
end
----------------------------------------------------------------------------
function is_ultrasudo(msg)
local var = false
for k,v in pairs(sudo_users) do
if msg.sender_user_id_ == v then
var = true
end
end
return var
end
----------------------------------------------------------------------------
function is_sudo(msg)
local hash = database:sismember(SUDO..'sudo:',msg.sender_user_id_)
if hash or is_ultrasudo(msg)  then
return true
else
return false
end
end
----------------------------------------------------------------------------
function is_bot(msg)
if tonumber(BOTS) == 587847161 then
return true
else
return false
end
end
----------------------------------------------------------------------------
function check_user(msg)
local var = true
if database:get(SUDO.."forcejoin") then
local channel = 't.me/Source_Search'
local url , res = https.request('https://api.telegram.org/bot587847161:AAG6YgW6U0JcMrUh2Rnj_bmzpIfGwxZg5R0/getchatmember?chat_id='..channel..'&user_id='..msg.sender_user_id_)
data = json:decode(url)
if res ~= 200 or data.result.status == "left" or data.result.status == "kicked" then
var = false
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ±ÿ®ÿßÿ™ ÿßÿ®ÿ™ÿØÿß Ÿàÿßÿ±ÿØ ⁄©ÿßŸÜÿßŸÑ ( '..channel..' ) ÿ¥Ÿà€åÿØ.', 1, 'html')
elseif data.ok then
return var
end
else
return var
end
end
----------------------------------------------------------------------------
function is_owner(msg)
local hash = database:sismember(SUDO..'owners:'..msg.chat_id_,msg.sender_user_id_)
if hash or  is_ultrasudo(msg) or is_sudo(msg) then
return true
else
return false
end
end
----------------------------------------------------------------------------
function sleep(n)
os.execute("sleep " .. tonumber(n))
end
----------------------------------------------------------------------------
function is_mod(msg)
local hash = database:sismember(SUDO..'mods:'..msg.chat_id_,msg.sender_user_id_)
if hash or  is_ultrasudo(msg) or is_sudo(msg) or is_owner(msg) then
return true
else
return false
end
end
----------------------------------------------------------------------------
function is_vip(msg)
local hash = database:sismember(SUDO..'vips:'..msg.chat_id_,msg.sender_user_id_)
if hash or  is_ultrasudo(msg) or is_sudo(msg) or is_owner(msg) or is_mod(msg) then
return true
else
return false
end
end
----------------------------------------------------------------------------
function is_banned(chat,user)
local hash =  database:sismember(SUDO..'banned'..chat,user)
if hash then
return true
else
return false
end
end
----------------------------------------------------------------------------
function is_gban(chat,user)
local hash =  database:sismember(SUDO..'gbaned',user)
if hash then
return true
else
return false
end
end
----------------------------------------------------------------------------
function deleteMessagesFromUser(chat_id, user_id)
tdcli_function ({
ID = "DeleteMessagesFromUser",
chat_id_ = chat_id,
user_id_ = user_id
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function addChatMember(chat_id, user_id, forward_limit)
tdcli_function ({
ID = "AddChatMember",
chat_id_ = chat_id,
user_id_ = user_id,
forward_limit_ = forward_limit
}, dl_cb, nil)
end
----------------------------------------------------------------------------
local function UpTime()
local uptime = io.popen("uptime -p"):read("*all")
days = uptime:match("up %d+ days")
hours = uptime:match(", %d+ hour") or uptime:match(", %d+ hours")
minutes = uptime:match(", %d+ minutes") or uptime:match(", %d+ minute")
if hours then
hours = hours
else
hours = ""
end
if days then
days = days
else
days = ""
end
if minutes then
minutes = minutes
else
minutes = ""
end
days = days:gsub("up", "")
local a_ = string.match(days, "%d+")
local b_ = string.match(hours, "%d+")
local c_ = string.match(minutes, "%d+")
if a_ then
a = a_
else
a = 0
end
if b_ then
b = b_
else
b = 0
end
if c_ then
c = c_
else
c = 0
end
return a..' days '..b..' hour '..c..' minute'
end
----------------------------------------------------------------------------
function is_filter(msg, value)
local hash = database:smembers(SUDO..'filters:'..msg.chat_id_)
if hash then
local names = database:smembers(SUDO..'filters:'..msg.chat_id_)
local text = ''
for i=1, #names do
if string.match(value:lower(), names[i]:lower()) and not is_mod(msg) then
local id = msg.id_
local msgs = {[0] = id}
local chat = msg.chat_id_
delete_msg(chat,msgs)
end
end
end
end
----------------------------------------------------------------------------
function is_muted(chat,user)
local hash =  database:sismember(SUDO..'mutes'..chat,user)
if hash then
return true
else
return false
end
end
----------------------------------------------------------------------------
function pin(channel_id, message_id, disable_notification)
tdcli_function ({
ID = "PinChannelMessage",
channel_id_ = getChatId(channel_id).ID,
message_id_ = message_id,
disable_notification_ = disable_notification
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function unpin(channel_id)
tdcli_function ({
ID = "UnpinChannelMessage",
channel_id_ = getChatId(channel_id).ID
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function pin(channel_id, message_id, disable_notification)
tdcli_function ({
ID = "PinChannelMessage",
channel_id_ = getChatId(channel_id).ID,
message_id_ = message_id,
disable_notification_ = disable_notification
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function SendMetion(chat_id, user_id, msg_id, text, offset, length)
local tt = database:get('endmsg') or ''
tdcli_function ({
ID = "SendMessage",
chat_id_ = chat_id,
reply_to_message_id_ = msg_id,
disable_notification_ = 0,
from_background_ = 1,
reply_markup_ = nil,
input_message_content_ = {
ID = "InputMessageText",
text_ = text..'\n\n'..tt,
disable_web_page_preview_ = 1,
clear_draft_ = 0,
entities_ = {[0]={
ID="MessageEntityMentionName",
offset_=offset,
length_=length,
user_id_=user_id
},
},
},
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function resolve_username(username,cb)
  tdcli_function ({
ID = "SearchPublicChat",
username_ = username
  }, cb, nil)
end
---------------------------------------------------------------------------
function del_all_msgs(chat_id, user_id)
  tdcli_function ({
ID = "DeleteMessagesFromUser",
chat_id_ = chat_id,
user_id_ = user_id
  }, dl_cb, nil)
end
----------------------------------------------------------------------------
function priv(chat,user)
local khash = database:sismember(SUDO..'sudo:',user)
local vhash = database:sismember(SUDO..'vips:'..chat,user)
local ohash = database:sismember(SUDO..'owners:'..chat,user)
local mhash = database:sismember(SUDO..'mods:'..chat,user)
if tonumber(SUDO) == tonumber(user) or khash or mhash or ohash or vhash then
return true
else
return false
end
end
----------------------------------------------------------------------------
function getInputFile(file)
local input = tostring(file)
if file:match('/') then
infile = {ID = "InputFileLocal", path_ = file}
elseif file:match('^%d+$') then
infile = {ID = "InputFileId", id_ = file}
else
infile = {ID = "InputFilePersistentId", persistent_id_ = file}
end
return infile
end
----------------------------------------------------------------------------
function sendPhoto(chat_id, reply_to_message_id, disable_notification, from_background, reply_markup, photo, caption)
tdcli_function ({
ID = "SendMessage",
chat_id_ = chat_id,
reply_to_message_id_ = reply_to_message_id,
disable_notification_ = disable_notification,
from_background_ = from_background,
reply_markup_ = reply_markup,
input_message_content_ = {
ID = "InputMessagePhoto",
photo_ = getInputFile(photo),
added_sticker_file_ids_ = {},
width_ = 0,
height_ = 0,
caption_ = caption
},
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function getChatId(id)
local chat = {}
local id = tostring(id)
if id:match('^-100') then
local channel_id = id:gsub('-100', '')
chat = {ID = channel_id, type = 'channel'}
else
local group_id = id:gsub('-', '')
chat = {ID = group_id, type = 'group'}
end
return chat
end
----------------------------------------------------------------------------
function getChannelMembers(channel_id, offset, filter, limit)
if not limit or limit > 200 then
limit = 200
end
tdcli_function ({
ID = "GetChannelMembers",
channel_id_ = getChatId(channel_id).ID,
filter_ = {
ID = "ChannelMembers" .. filter
},
offset_ = offset,
limit_ = limit
}, dl_cb, nil)
end
----------------------------------------------------------------------------
function adduser(chat_id, user_id, forward_limit)
tdcli_function ({
ID = "AddChatMember",
chat_id_ = chat_id,
user_id_ = user_id,
forward_limit_ = forward_limit or 50
}, dl_cb, nil)
end
----------------------------------------------------------------------------

----------------------------------------------------------------------------
function sendContact(chat_id, reply_to_message_id, disable_notification, from_background, reply_markup, phone_number, first_name, last_name, user_id)
  tdcli_function ({
ID = "SendMessage",
chat_id_ = chat_id,
reply_to_message_id_ = reply_to_message_id,
disable_notification_ = disable_notification,
from_background_ = from_background,
reply_markup_ = reply_markup,
input_message_content_ = {
ID = "InputMessageContact",
contact_ = {
  ID = "Contact",
  phone_number_ = phone_number,
  first_name_ = first_name,
  last_name_ = last_name,
  user_id_ = user_id
},
},
  }, dl_cb, nil)
end
-------------
----------------------------------------------------------------------------
function banall(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿ™Ÿà ÿ®ŸàÿØ€å ÿÆŸàÿØÿ™Ÿà ÿ≥ŸàŸæÿ± ÿ®ŸÜ ŸÖ€å⁄©ÿ±ÿØ€å ÿü üòê', 1, 'md')
return false
end
if priv(chat,user) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¨ÿ≤Ÿà ( ŸÖÿßŸÑ⁄©€åŸÜ | ÿ≥ÿßÿ≤ŸÜÿØ⁄ØÿßŸÜ ) ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ®ÿßÿ¥ÿØ!', 1, 'md')
else
bot.changeChatMemberStatus(chat, user, "Kicked")
database:sadd(SUDO..'gbaned',user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Successfully Sicked !' , 9, string.len(user)) 
else
SendMetion(msg.chat_id_, user, msg.id_, '¬ª ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿßÿ≤ ÿ™ŸÖÿßŸÖ€å ⁄Øÿ±ŸàŸá Ÿáÿß€å ÿ±ÿ®ÿßÿ™ ÿ®ŸÜ ÿ¥ÿØ.' , 10, string.len(user))
end
end
end
--------------------------------------------------------------------------
local calc = function(exp)
  url = "http://api.mathjs.org/v1/"
  url = url .. "?expr=" .. URL.escape(exp)
  data, res = http.request(url)
  text = nil
  if res == 200 then
    text = data
  elseif res == 400 then
    text = data
  else
    text = "ERR"
  end
  return text
end

----------------------------------------------------------------------------------------------
function kick(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
return false
end
if priv(chat,user) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¨ÿ≤Ÿà ( ŸÖÿßŸÑ⁄©€åŸÜ | ÿ≥ÿßÿ≤ŸÜÿØ⁄ØÿßŸÜ ) ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ®ÿßÿ¥ÿØ!', 1, 'md')
else
bot.changeChatMemberStatus(chat, user, "Kicked")
end
end
----------------------------------------------------------------------------
function ban(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿ™Ÿà ÿ®ŸàÿØ€å ÿÆŸàÿØÿ™Ÿà ÿ®ŸÜ ŸÖ€å⁄©ÿ±ÿØ€å ÿü üòê', 1, 'md')
return false
end
if priv(chat,user) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¨ÿ≤Ÿà ( ŸÖÿßŸÑ⁄©€åŸÜ | ÿ≥ÿßÿ≤ŸÜÿØ⁄ØÿßŸÜ ) ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ®ÿßÿ¥ÿØ!', 1, 'md')
else
bot.changeChatMemberStatus(chat, user, "Kicked")
database:sadd(SUDO..'banned'..chat,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Successfully Baned !' , 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '¬ª ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿ®ŸÜ ÿ¥ÿØ.' , 10, string.len(user))
end
end
end
----------------------------------------------------------------------------
function mute(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿ™Ÿà ÿ®ŸàÿØ€å ÿÆŸàÿØÿ™Ÿà ÿ≥ÿß€åŸÑŸÜÿ™ ŸÖ€å⁄©ÿ±ÿØ€å ÿü üòê', 1, 'md')
return false
end
if priv(chat,user) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¨ÿ≤Ÿà ( ŸÖÿßŸÑ⁄©€åŸÜ | ÿ≥ÿßÿ≤ŸÜÿØ⁄ØÿßŸÜ ) ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ®ÿßÿ¥ÿØ!', 1, 'md')
else
database:sadd(SUDO..'mutes'..chat,user)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*‚Ä¢ You Can Not Remove The Ability To Chat In Groups From Other Managers !*', 1, 'md')
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿØÿ± ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ŸÇÿ±ÿßÿ± ⁄Øÿ±ŸÅÿ™.' , 10, string.len(user))
end
end
end
--------------------------{inline}-------------------------------------------
function edit(message_id, text, keyboard)
	local urlk = url .. "/editMessageText?&inline_message_id=" .. message_id .. "&text=" .. URL.escape(text)
	urlk = urlk .. "&parse_mode=html"
	if keyboard then
		urlk = urlk .. "&reply_markup=" .. URL.escape(json.encode(keyboard))
	end
	return https.request(urlk)
end
function Canswer(callback_query_id, text, show_alert)
	local urlk = url .. "/answerCallbackQuery?callback_query_id=" .. callback_query_id .. "&text=" .. URL.escape(text)
	if show_alert then
		urlk = urlk .. "&show_alert=true"
	end
	https.request(urlk)
end
function answer(inline_query_id, query_id, title, description, text, keyboard)
	local results = {
		{}
	}
	results[1].id = query_id
	results[1].type = "article"
	results[1].description = description
	results[1].title = title
	results[1].message_text = text
	urlk = url .. "/answerInlineQuery?inline_query_id=" .. inline_query_id .. "&results=" .. URL.escape(json.encode(results)) .. "&parse_mode=Markdown&cache_time=" .. 1
	if keyboard then
    results[1].reply_markup = keyboard
    urlk = url .. "/answerInlineQuery?inline_query_id=" .. inline_query_id .. "&results=" .. URL.escape(json.encode(results)) .. "&parse_mode=Markdown&cache_time=" .. 1
  end
  https.request(urlk)
end
---------------------------------------------------------------------------
local having_access = function(user_id, chat, Q_id)
  local var = false
  if is_mod(user_id, chat) and is_ReqMenu(user_id, chat) then
    var = true
  end
  if not is_ReqMenu(user_id, chat) and is_mod(user_id, chat) then
    if database:get("lang:gp:" .. chat) then
      Canswer(Q_id, "[‚Ä¢‚Ä¢ You Have Not Requested This Menu ‚Ä¢‚Ä¢]")
    else
      Canswer(Q_id, "[‚Ä¢‚Ä¢ ÿ¥ŸÖÿß ÿß€åŸÜ ŸÅŸáÿ±ÿ≥ÿ™ ÿ±ÿß ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ŸÜ⁄©ÿ±ÿØŸá ÿß€åÿØ ‚Ä¢‚Ä¢]")
    end
  end
  if not is_mod(user_id, chat) then
    if database:get("lang:gp:" .. chat) then
      Canswer(Q_id, "[‚Ä¢‚Ä¢ You Do Not Have Access To Make Changes ‚Ä¢‚Ä¢]")
    else
      Canswer(Q_id, "[‚Ä¢‚Ä¢ ÿ¥ŸÖÿß ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ÿßŸÜÿ¨ÿßŸÖ ÿ™ÿ∫€å€åÿ±ÿßÿ™ ŸÜÿØÿßÿ±€åÿØ ‚Ä¢‚Ä¢]")
    end
  end
  return var
end
----------------------------------------------------------------------------
function unbanall(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
return false
end
database:srem(SUDO..'gbaned',user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Successfully UnSicked !' , 9, string.len(user)) 
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿßÿ≤ ÿ™ŸÖÿßŸÖ€å ⁄Øÿ±ŸàŸá Ÿáÿß€å ÿ±ÿ®ÿßÿ™ ÿßŸÜ ÿ®ŸÜ ÿ¥ÿØ.' , 10, string.len(user))
end
end
----------------------------------------------------------------------------
function unban(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
return false
end
database:srem(SUDO..'banned'..chat,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Removed From The List Of Baned Users !' , 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿßŸÜ ÿ®ŸÜ ÿ¥ÿØ.' , 10, string.len(user))
end
end
----------------------------------------------------------------------------
function unmute(msg,chat,user)
if tonumber(user) == tonumber(bot_id) then
return false
end
database:srem(SUDO..'mutes'..chat,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Removed From The Silent List !' , 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿßÿ≤ ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ÿÆÿßÿ±ÿ¨ ÿ¥ÿØ.' , 10, string.len(user))
end
end
----------------------------------------------------------------------------
function delete_msg(chatid,mid)
tdcli_function ({ID="DeleteMessages", chat_id_=chatid, message_ids_=mid}, dl_cb, nil)
end
----------------------------------------------------------------------------
function settings(msg,value,lock) 
local hash = SUDO..'settings:'..msg.chat_id_..':'..value
if value == 'file' then
text = 'ŸÅÿß€åŸÑ'
elseif value == 'inline' then
text = 'ÿØ⁄©ŸÖŸá ÿ¥€åÿ¥Ÿá ÿß€å'
elseif value == 'link' then
text = 'ŸÑ€åŸÜ⁄©'
elseif value == 'game' then
text = 'ÿ®ÿßÿ≤€å'
elseif value == 'username' then
text = '€åŸàÿ≤ÿ±ŸÜ€åŸÖ'
elseif value == 'tag' then
text = 'Ÿáÿ¥ÿ™⁄Ø'
elseif value == 'pin' then
text = 'ÿ≥ŸÜÿ¨ÿßŸÇ'
elseif value == 'photo' then
text = 'ÿπ⁄©ÿ≥'
elseif value == 'gif' then
text = '⁄Ø€åŸÅ'
elseif value == 'video' then
text = 'ŸÅ€åŸÑŸÖ'
elseif value == 'audio' then
text = 'ÿµÿØÿß'
elseif value == 'music' then
text = 'ŸÖŸàÿ≤€å⁄©'
elseif value == 'text' then
text = 'ŸÖÿ™ŸÜ'
elseif value == 'sticker' then
text = 'ÿßÿ≥ÿ™€å⁄©ÿ±'
elseif value == 'contact' then
text = 'ŸÖÿÆÿßÿ∑ÿ®'
elseif value == 'forward' then
text = 'ŸÅŸàÿ±Ÿàÿßÿ±ÿØ'
elseif value == 'persian' then
text = 'ŸÅÿßÿ±ÿ≥€å'
elseif value == 'english' then
text = 'ÿßŸÜ⁄Ø€åŸÑ€åÿ≥€å'
elseif value == 'bot' then
text = 'ÿ±ÿ®ÿßÿ™'
elseif value == 'tgservice' then
text = 'Ÿæ€åÿßŸÖ ÿ≥ÿ±Ÿà€åÿ≥€å'
elseif value == 'fosh' then
text = 'ŸÅÿ≠ÿ¥'
elseif value == 'selfivideo' then
text = 'ŸÅ€åŸÑŸÖ ÿ≥ŸÑŸÅ€å'
elseif value == 'emoji' then
text = 'ÿß€åŸÖŸàÿ¨€å'
elseif value == 'cmd' then
text = 'ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™'
elseif value == 'join' then
text = 'Ÿàÿ±ŸàÿØ€å ⁄Øÿ±ŸàŸá'
elseif value == 'reply' then
text = 'Ÿæÿßÿ≥ÿÆ'
else return false
end
if lock then
database:set(hash,true)
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚ú™ ŸÇŸÅŸÑ  ( `'..text..'` ) ‚Ü´ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ŸÅÿπÿßŸÑ ÿ¥ÿØ ! \n ÿßÿ≤ ÿß€åŸÜ Ÿæÿ≥ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿ≠ÿßŸà€å  ( `'..text..'` ) ÿ≠ÿ∞ŸÅ ÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ ! \n ',1,'md')
else
database:del(hash)
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚ú™ ŸÇŸÅŸÑ ( `'..text..'` ) ‚Ü´ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∫€åÿ± ŸÅÿπÿßŸÑ ÿ¥ÿØ ! \n ÿßÿ≤ ÿß€åŸÜ Ÿæÿ≥ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿ≠ÿßŸà€å ( `'..text..'` ) ÿ≠ÿ∞ŸÅ ŸÜÿÆŸàÿßŸáŸÜÿØ ÿ¥ÿØ ! \n ',1,'md')
end
end
------------------------------------------------------------
function is_lock(msg,value)
local hash = SUDO..'settings:'..msg.chat_id_..':'..value
if database:get(hash) then
return true
else
return false
end
end
----------------------------------------------------------------------------
function warn(msg,chat,user)
local type = database:hget("warn:"..msg.chat_id_,"swarn")
if type == "kick" then
kick(msg,chat,user)
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿÆÿ∑ÿßÿ± ÿ®€åÿ¥ ÿßÿ≤ ÿ≠ÿØ ÿßÿÆÿ±ÿßÿ¨ ÿ¥ÿØ'
SendMetion(msg.chat_id_, user, msg.id_, text, 8, string.len(user))
end
if type == "ban" then
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿÆÿ∑ÿßÿ± ÿ®€åÿ¥ ÿßÿ≤ ÿ≠ÿØ ÿ®ŸÜ ÿ¥ÿØ'
SendMetion(msg.chat_id_, user, msg.id_, text, 8, string.len(user))
changeChatMemberStatus(chat, user, "Kicked")
database:sadd(SUDO..'banned'..chat,user)
end
if type == "mute" then
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿÆÿ∑ÿßÿ± ÿ®€åÿ¥ ÿßÿ≤ ÿ≠ÿØ ÿ≥ÿß€åŸÑŸÜÿ™ ÿ¥ÿØ'
SendMetion(msg.chat_id_, user, msg.id_, text, 8, string.len(user))
database:sadd(SUDO..'mutes'..msg.chat_id_,user)
end
end
----------------------------------------------------------------------------
function trigger_anti_spam(msg,type)
if type == 'kick' then
kick(msg,msg.chat_id_,msg.sender_user_id_)
end
if type == 'ban' then
if is_banned(msg.chat_id_,msg.sender_user_id_) then else
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, msg.sender_user_id_, msg.id_, 'The User [ '..msg.sender_user_id_..' ] Was Baned From The Group Because Of A Repeated (over-the-message) Message And Its Connection To The Group Was Disconnected.' , 11, string.len(msg.sender_user_id_))
else
SendMetion(msg.chat_id_, msg.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..msg.sender_user_id_..' ) ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ŸÖ⁄©ÿ±ÿ± ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿ®ŸÜ ÿ¥ÿØ.' , 10, string.len(msg.sender_user_id_))
end
end
bot.changeChatMemberStatus(msg.chat_id_, msg.sender_user_id_, "Kicked")
database:sadd(SUDO..'banned'..msg.chat_id_,msg.sender_user_id_)
end
if type == 'mute' then
if is_muted(msg.chat_id_,msg.sender_user_id_) then else
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, msg.sender_user_id_, msg.id_, 'User [ '..msg.sender_user_id_..' ]  Was Moved To SilentList Because Of Repeated (over-repeated) Message Sending.' , 7, string.len(msg.sender_user_id_))
else
SendMetion(msg.chat_id_, msg.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..msg.sender_user_id_..' ) ÿ®Ÿá ÿØŸÑ€åŸÑ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ŸÖ⁄©ÿ±ÿ± ÿ≥ÿß€åŸÑŸÜÿ™ ÿ¥ÿØ.' , 10, string.len(msg.sender_user_id_))
end
end
database:sadd(SUDO..'mutes'..msg.chat_id_,msg.sender_user_id_)
end
end
----------------------------------------------------------------------------
function televardump(msg,value)
local text = json:encode(value)
bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 'html')
end
----------------------------------------------------------------------------
function run(msg,data)
----------------------------------------------------------------------------
if msg.chat_id_ then
local id = tostring(msg.chat_id_)
if id:match('-100(%d+)') then
database:incr(SUDO..'sgpsmessage:')
if not database:sismember(SUDO.."botgps",msg.chat_id_) then
database:sadd(SUDO.."botgps",msg.chat_id_)
end
elseif id:match('^(%d+)') then
database:incr(SUDO..'pvmessage:')
if not database:sismember(SUDO.."usersbot",msg.chat_id_) then
database:sadd(SUDO.."usersbot",msg.chat_id_)
end
else
database:incr(SUDO..'gpsmessage:')
if not database:sismember(SUDO.."botgp",msg.chat_id_) then
database:sadd(SUDO.."botgp",msg.chat_id_)
end
end
end
if msg then
database:incr(SUDO..'groupmsgkk:'..msg.chat_id_..':')
database:incr(SUDO..'total:messages:'..msg.chat_id_..':'..msg.sender_user_id_)
if msg.send_state_.ID == "MessageIsSuccessfullySent" then
return false
end
end
----------------------------------------------------------------------------
if msg.chat_id_ then
local id = tostring(msg.chat_id_)
if id:match('-100(%d+)') then
chat_type = 'super'
elseif id:match('^(%d+)') then
chat_type = 'user'
else
chat_type = 'group'
end
end
----------------------------------------------------------------------------
local text = msg.content_.text_
local text1 = msg.content_.text_
if text and text:match('[qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM]') then
text = text
end
----------------------------------------------------------------------------
if msg.content_.ID == "MessageText" then
msg_type = 'text'
end
if msg.content_.ID == "MessageChatAddMembers" then
msg_type = 'add'
end
if msg.content_.ID == "MessageChatJoinByLink" then
msg_type = 'join'
end
if msg.content_.ID == "MessagePhoto" then
msg_type = 'photo'
end
----------------------------------------------------------------------------
if msg_type == 'text' and text then
if text:match('^[/!]') then
text = text:gsub('^[/!]','')
end
end
----------------------------------------------------------------------------
if text then
if not database:get(SUDO..'bot_id') then
function cb(a,b,c)
database:set(SUDO..'bot_id',b.id_)
end
bot.getMe(cb)
end
end
-------------------------------------------------StartBot-------------------------------------------------
if text == 'start' and not database:get(SUDO.."timeactivee:"..msg.chat_id_) and chat_type == 'user' and check_user(msg) then
function pv_start(extra, result, success)
SendMetion(msg.chat_id_, result.id_, msg.id_, 'ÿØÿ±ŸàÿØ ( '..result.id_..' | '..result.first_name_..' ) \n\nÿ®ÿ±ÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿß€åŸÜ ÿ±ÿ®ÿßÿ™ ⁄©ÿßŸÅ€å ÿßÿ≥ÿ™ ÿß€åŸÜ ÿ±ÿ®ÿßÿ™ ÿ±ÿß ÿ®Ÿá ⁄Øÿ±ŸàŸá ÿÆŸàÿØ ÿßÿ∂ÿßŸÅŸá ⁄©ŸÜ€åÿØ .\n\nŸà ÿ≥Ÿæÿ≥ ÿØÿ≥ÿ™Ÿàÿ± ÿ≤€åÿ± ÿ±ÿß ÿØÿ± ⁄Øÿ±ŸàŸá Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ :\n\n/active\n\nÿ®ÿß ÿ≤ÿØŸÜ ÿß€åŸÜ ÿØÿ≥ÿ™Ÿàÿ± ÿ±ÿ®ÿßÿ™ ÿØÿ± ⁄Øÿ±ŸàŸá ÿ¥ŸÖÿß ŸÅÿπÿßŸÑ ŸÖ€åÿ¥ŸàÿØ .\n\nŸÑÿ∑ŸÅÿß ÿ®ÿ±ÿß€å ÿ≠ŸÖÿß€åÿ™ ÿßÿ≤ ŸÖÿß ÿ±ÿ®ÿßÿ™ ÿ±Ÿà ÿ®Ÿá ÿßÿ¥ÿ™ÿ±ÿß⁄© ÿ®ÿ≤ÿßÿ±€åÿØ.\n\n‚úë '..botchannel..'' , 7, string.len(result.id_))
end
tdcli.getUser(msg.sender_user_id_, pv_start)
database:setex(SUDO.."timeactivee:"..msg.chat_id_, 73200, true)
end
----------------------------------------------------------------------------
if chat_type == 'super' then
local user_id = msg.sender_user_id_
floods = database:hget("flooding:settings:"..msg.chat_id_,"flood") or  'nil'
NUM_MSG_MAX = database:hget("flooding:settings:"..msg.chat_id_,"floodmax") or 5
TIME_CHECK = database:hget("flooding:settings:"..msg.chat_id_,"floodtime") or 5
if database:hget("flooding:settings:"..msg.chat_id_,"flood") then
if not is_mod(msg) then
if msg.content_.ID == "MessageChatAddMembers" then
return
else
local post_count = tonumber(database:get('floodc:'..msg.sender_user_id_..':'..msg.chat_id_) or 0)
if post_count > tonumber(database:hget("flooding:settings:"..msg.chat_id_,"floodmax") or 5) then
local ch = msg.chat_id_
local type = database:hget("flooding:settings:"..msg.chat_id_,"flood")
trigger_anti_spam(msg,type)
end
database:setex('floodc:'..msg.sender_user_id_..':'..msg.chat_id_, tonumber(database:hget("flooding:settings:"..msg.chat_id_,"floodtime") or 3), post_count+1)
end
end
local edit_id = data.text_ or 'nil'
NUM_MSG_MAX = 5
if database:hget("flooding:settings:"..msg.chat_id_,"floodmax") then
NUM_MSG_MAX = database:hget("flooding:settings:"..msg.chat_id_,"floodmax")
end
if database:hget("flooding:settings:"..msg.chat_id_,"floodtime") then
TIME_CHECK = database:hget("flooding:settings:"..msg.chat_id_,"floodtime")
end
end
----------------------------------------------------------------------------
-- save pin message id
if msg.content_.ID == 'MessagePinMessage' then
if is_lock(msg,'pin') and is_owner(msg) then
database:set(SUDO..'pinned'..msg.chat_id_, msg.content_.message_id_)
elseif not is_lock(msg,'pin') then
database:set(SUDO..'pinned'..msg.chat_id_, msg.content_.message_id_)
end
end
----------------------------------------------------------------------------
-- check filters
if text and not is_mod(msg) and not is_vip(msg) then
if is_filter(msg,text) then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- check settings
----------------------------------------------------------------------------
-- lock tgservice
if is_lock(msg,'tgservice') then
if msg.content_.ID == "MessageChatJoinByLink" or msg.content_.ID == "MessageChatAddMembers" or msg.content_.ID == "MessageChatDeleteMember" then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock pin
if is_owner(msg) then else
if is_lock(msg,'pin') then
if msg.content_.ID == 'MessagePinMessage' then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Pin Lock Is Active*\n*You Do Not Have Any Authority You Can Not Pin A Message*',1, 'md')
bot.unpinChannelMessage(msg.chat_id_)
local PinnedMessage = database:get(SUDO..'pinned'..msg.chat_id_)
if PinnedMessage then
bot.pinChannelMessage(msg.chat_id_, tonumber(PinnedMessage), 0)
end
end
end
end
----------------------------------------------------------------------------
if database:get(SUDO..'automuteall'..msg.chat_id_)  then
if database:get(SUDO.."automutestart"..msg.chat_id_ ) then
if database:get(SUDO.."automuteend"..msg.chat_id_)  then
local time = os.date("%H%M")
local start = database:get(SUDO.."automutestart"..msg.chat_id_)
local endtime = database:get(SUDO.."automuteend"..msg.chat_id_)
if tonumber(endtime) < tonumber(start) then
if tonumber(time) <= 2359 and tonumber(time) >= tonumber(start) then
if not database:get(SUDO..'muteall'..msg.chat_id_) then
database:set(SUDO..'muteall'..msg.chat_id_,true)
end
elseif tonumber(time) >= 0000 and tonumber(time) < tonumber(endtime) then
if not database:get(SUDO..'muteall'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ®ÿß ÿ™Ÿàÿ¨Ÿá ÿ®Ÿá ÿ≥ÿßÿπÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØŸá ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ŸÇŸÅŸÑ ŸÖ€åÿ¥ŸàÿØ.\n\n‚ùä ÿßÿ≤ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ÿÆŸàÿØÿßÿ±€å ⁄©ŸÜ€åÿØ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ≠ÿ∞ŸÅ ŸÖ€åÿ¥ŸàÿØ.', 1, 'md')
database:set(SUDO..'muteall'..msg.chat_id_,true)
end
else
if database:get(SUDO..'muteall'..msg.chat_id_)then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ.\n\n‚ùä ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ŸÖ€åÿ™ŸàÿßŸÜŸÜÿØ ŸÖÿ∑ÿßŸÑÿ® ÿÆŸàÿØ ÿ±ÿß ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜŸÜÿØ.', 1, 'md')
database:del(SUDO..'muteall'..msg.chat_id_)
end
end
elseif tonumber(endtime) > tonumber(start) then
if tonumber(time) >= tonumber(start) and tonumber(time) < tonumber(endtime) then
if not database:get(SUDO..'muteall'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ®ÿß ÿ™Ÿàÿ¨Ÿá ÿ®Ÿá ÿ≥ÿßÿπÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØŸá ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ŸÇŸÅŸÑ ŸÖ€åÿ¥ŸàÿØ.\n\n‚ùä ÿßÿ≤ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ÿÆŸàÿØÿßÿ±€å ⁄©ŸÜ€åÿØ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ≠ÿ∞ŸÅ ŸÖ€åÿ¥ŸàÿØ.', 1, 'md')
database:set(SUDO..'muteall'..msg.chat_id_,true)
end
else
if database:get(SUDO..'muteall'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ.\n\n‚ùä ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ŸÖ€åÿ™ŸàÿßŸÜŸÜÿØ ŸÖÿ∑ÿßŸÑÿ® ÿÆŸàÿØ ÿ±ÿß ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜŸÜÿØ.', 1, 'md')
database:del(SUDO..'muteall'..msg.chat_id_)
end
end
end
end
end
end
----------------------------------------------------------------------------
if is_vip(msg) then
else
----------------------------------------------------------------------------
-- lock link
if is_lock(msg,'link') then
if text then
if msg.content_.entities_ and msg.content_.entities_[0] and msg.content_.entities_[0].ID == 'MessageEntityUrl' or msg.content_.text_.web_page_ then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
if msg.content_.caption_ then
local text = msg.content_.caption_
local is_link = text:match("[Tt][Ee][Ll][Ee][Gg][Rr][Aa][Mm].[Mm][Ee]/") or text:match("[Tt][Ll][Gg][Rr][Mm].[Mm][Ee]/") or text:match("[Jj][Oo][Ii][Nn][Cc][Hh][Aa][Tt]/") or text:match("[Tt].[Mm][Ee]/")
if is_link then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
----------------------------------------------------------------------------
-- lock username
if is_lock(msg,'username') then
if text then
local is_username = text:match("@[%a%d]")
if is_username then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
if msg.content_.caption_ then
local text = msg.content_.caption_
local is_username = text:match("@[%a%d]")
if is_username then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
----------------------------------------------------------------------------
-- lock hashtag
if is_lock(msg,'tag') then
if text then
local is_hashtag = text:match("#")
if is_hashtag then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
if msg.content_.caption_ then
local text = msg.content_.caption_
local is_hashtag = text:match("#")
if is_hashtag then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
----------------------------------------------------------------------------
-- lock rep
if is_lock(msg,'reply') then
if msg.reply_to_message_id_ ~= 0 then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock sticker
if is_lock(msg,'sticker') then
if msg.content_.ID == 'MessageSticker' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock join
if is_lock(msg,'join') then
if msg.content_.ID == "MessageChatJoinByLink" or msg.content_.ID == "MessageChatAddMembers" then
bot.changeChatMemberStatus(msg.chat_id_, msg.sender_user_id_, "Kicked")
end
end
----------------------------------------------------------------------------
-- lock forward
if is_lock(msg,'forward') then
if msg.forward_info_ then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock photo
if is_lock(msg,'photo') then
if msg.content_.ID == 'MessagePhoto' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock file
if is_lock(msg,'file') then
if msg.content_.ID == 'MessageDocument' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock file
if is_lock(msg,'inline') then
if msg.reply_markup_ and msg.reply_markup_.ID == 'ReplyMarkupInlineKeyboard' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock game
if is_lock(msg,'game') then
if msg.content_.game_ then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock music
if is_lock(msg,'music') then
if msg.content_.ID == 'MessageAudio' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock voice
if is_lock(msg,'audio') then
if msg.content_.ID == 'MessageVoice' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock gif
if is_lock(msg,'gif') then
if msg.content_.ID == 'MessageAnimation' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock contact
if is_lock(msg,'contact') then
if msg.content_.ID == 'MessageContact' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock video
if is_lock(msg,'video') then
if msg.content_.ID == 'MessageVideo' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock text
if is_lock(msg,'text') then
if msg.content_.ID == 'MessageText' then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock persian
if is_lock(msg,'persian') then
if text and text:match('[\216-\219][\128-\191]') then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
if msg.content_.caption_ then
local text = msg.content_.caption_
local is_persian = text:match("[\216-\219][\128-\191]")
if is_persian then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
----------------------------------------------------------------------------
-- lock english
if is_lock(msg,'english') then
if text then
if text:match('[qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM]') then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
if msg.content_.caption_ then
local text = msg.content_.caption_
local is_english = text:match("[qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM]")
if is_english then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
end
----------------------------------------------------------------------------
-- lock fosh
if is_lock(msg,'fosh') then
if text then
if text:match("⁄©€åÿ±") or text:match("⁄©ÿ≥") or text:match("ÿ™ÿÆŸÖ") or text:match("ÿ¨€åŸÜÿØŸá") or  text:match("⁄©ÿµ") or text:match("⁄©ŸàŸÜ€å") or text:match("ÿ¨ŸÜÿØÿπ") or text:match("⁄©€åÿ±€å") or text:match("⁄©ÿµÿØŸá") or text:match("⁄©ŸàŸÜ")  or text:match("ÿ¨ŸÜÿØŸá") or text:match("ŸÜŸÜŸá") or text:match("ŸÜŸÜÿ™") or  text:match("⁄©€åÿ±ŸÖ") or text:match("ÿ™ÿÆŸÖŸÖ") or text:match("ÿ™ÿÆŸÖ") or text:match("ŸÜŸÜÿπ") or text:match("ŸÖÿßÿØÿ±") or text:match("ŸÇŸáÿ®Ÿá") or text:match("⁄Øÿß€å€åÿØ€å") or text:match("⁄Øÿß€å€åÿØŸÖ") or text:match("ŸÖ€å⁄ØÿßŸÖ") or text:match("ŸÖ€å⁄ØÿßŸÖÿ™") or text:match("ÿ≥⁄©ÿ≥") or text:match("kir") or text:match("kos") or text:match("kon") or text:match("nne") or text:match("nnt")  then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end

----------------------------------------------------------------------------
-- lock Tabch
if is_lock(msg,'tabchi') then
if text then
if text:match("ÿßÿØÿØ€å") or text:match("ÿßÿØÿØ€å ⁄ØŸÑŸÖ") or text:match("ÿ®€åÿß Ÿæ€åŸà€å ÿπÿ¥ŸÇŸÖ") or text:match("⁄©ÿµŸÖ") or  text:match("€åŸá ŸÜŸÅÿ± ÿ®€åÿßÿØ Ÿæ€åŸà€å") then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end

----------------------------------------------------------------------------
-- lock emoji
if is_lock(msg,'emoji') then
if text then
local is_emoji_msg = text:match("üòÄ") or text:match("üò¨") or text:match("üòÅ") or text:match("üòÇ") or  text:match("üòÉ") or text:match("üòÑ") or text:match("üòÖ") or text:match("‚ò∫Ô∏è") or text:match("üôÉ") or text:match("üôÇ") or text:match("üòä") or text:match("üòâ") or text:match("üòá") or text:match("üòÜ") or text:match("üòã") or text:match("üòå") or text:match("üòç") or text:match("üòò") or text:match("üòó") or text:match("üòô") or text:match("üòö") or text:match("ü§ó") or text:match("üòé") or text:match("ü§ì") or text:match("ü§ë") or text:match("üòõ") or text:match("üòè") or text:match("üò∂") or text:match("üòê") or text:match("üòë") or text:match("üòí") or text:match("üôÑ") or text:match("ü§î") or text:match("üòï") or text:match("üòî") or text:match("üò°") or text:match("üò†") or text:match("üòü") or text:match("üòû") or text:match("üò≥") or text:match("üôÅ") or text:match("‚òπÔ∏è") or text:match("üò£") or text:match("üòñ") or text:match("üò´") or text:match("üò©") or text:match("üò§") or text:match("üò≤") or text:match("üòµ") or text:match("üò≠") or text:match("üòì") or text:match("üò™") or text:match("üò•") or text:match("üò¢") or text:match("ü§ê") or text:match("üò∑") or text:match("ü§í") or text:match("ü§ï") or text:match("üò¥") or text:match("üíã") or text:match("‚ù§Ô∏è")
if is_emoji_msg then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
end
----------------------------------------------------------------------------
-- lock selfvideo
if is_lock(msg,'selfivideo') then
if msg.content_.ID == "MessageUnsupported" then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
end
----------------------------------------------------------------------------
-- lock bot
if is_lock(msg,'bot') then
if msg.content_.ID == "MessageChatAddMembers" then
if msg.content_.members_[0].type_.ID == 'UserTypeBot' then
bot.changeChatMemberStatus(msg.chat_id_, msg.content_.members_[0].id_, 'Kicked')
end
end
end
----------------------------------------------------------------------------
-- check mutes
local muteall = database:get(SUDO..'muteall'..msg.chat_id_)
if msg.sender_user_id_ and muteall and not is_mod(msg) then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
if msg.sender_user_id_ and is_muted(msg.chat_id_,msg.sender_user_id_) then
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
----------------------------------------------------------------------------
-- check bans
if msg.sender_user_id_ and is_banned(msg.chat_id_,msg.sender_user_id_) then
kick(msg,msg.chat_id_,msg.sender_user_id_)
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
if msg.content_ and msg.content_.members_ and msg.content_.members_[0] and msg.content_.members_[0].id_ and is_banned(msg.chat_id_,msg.content_.members_[0].id_) then
kick(msg,msg.chat_id_,msg.content_.members_[0].id_)
delete_msg(msg.chat_id_, {[0] = msg.id_})
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿ®ŸÜ ÿ¥ÿØŸá ÿßÿ≥ÿ™.',1, 'md')
end
----------------------------------------------------------------------------
--check Gbans
if msg.sender_user_id_ and is_gban(msg.chat_id_,msg.sender_user_id_) then
kick(msg,msg.chat_id_,msg.sender_user_id_)
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
if msg.content_ and msg.content_.members_ and msg.content_.members_[0] and msg.content_.members_[0].id_ and is_gban(msg.chat_id_,msg.content_.members_[0].id_) then
kick(msg,msg.chat_id_,msg.content_.members_[0].id_)
delete_msg(msg.chat_id_, {[0] = msg.id_})
end
----------------------------------------------------------------------------
if is_lock(msg,'cmd') then
if not is_mod(msg) then
return  false
end
end
end
----------------------------------------------------------------------------
-- welcome
local status_welcome = (database:get(SUDO..'status:welcome:'..msg.chat_id_) or 'disable')
if status_welcome == 'enable' then
if msg.content_.ID == "MessageChatJoinByLink" then
if not is_banned(msg.chat_id_,msg.sender_user_id_) then
function wlc(extra,result,success)
if database:get(SUDO..'welcome:'..msg.chat_id_) then
t = database:get(SUDO..'welcome:'..msg.chat_id_)
else
t = 'Hi {name}\nWelcome To This Group !'
end
local t = t:gsub('{name}',result.first_name_)
bot.sendMessage(msg.chat_id_, msg.id_, 1, t,0)
end
bot.getUser(msg.sender_user_id_,wlc)
end
end
if msg.content_.members_ and msg.content_.members_[0] and msg.content_.members_[0].type_.ID == 'UserTypeGeneral' then
if msg.content_.ID == "MessageChatAddMembers" then
if not is_banned(msg.chat_id_,msg.content_.members_[0].id_) then
if database:get(SUDO..'welcome:'..msg.chat_id_) then
t = database:get(SUDO..'welcome:'..msg.chat_id_)
else
t = 'Hi {name}\nWelcome To This Group !'
end
local t = t:gsub('{name}',msg.content_.members_[0].first_name_)
bot.sendMessage(msg.chat_id_, msg.id_, 1, t,0)
end
end
end
end
----------------------------------------------------------------------------
-- locks
if text and is_owner(msg) then
local lock = text:match('^lock pin$')
local unlock = text:match('^unlock pin$')
if lock then
settings(msg,'pin','lock')
end
if unlock then
settings(msg,'pin')
end
end
if text and is_mod(msg) then
local lock = text:match('^lock (.*)$') or text:match('^ŸÇŸÅŸÑ (.*)$')
local unlock = text:match('^unlock (.*)$') or text:match('^ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ (.*)$')
local pin = text:match('^lock pin$') or text:match('^unlock pin$')
if pin and is_mod(msg) then
elseif pin and not is_mod(msg) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ¥ŸÖÿß ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿß€åŸÜ ÿØÿ≥ÿ™Ÿàÿ± ÿ±ÿß ŸÜÿØÿßÿ±€åÿØ.',1, 'md')
elseif lock then
settings(msg,lock,'lock')
elseif unlock then
settings(msg,unlock)
end
end
----------------------------------------------------------------------------
-- lock flood settings
if text and is_owner(msg) then
if text == 'lock flood kick' then
database:hset("flooding:settings:"..msg.chat_id_ ,"flood",'kick')
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Lock Message Activation Repeatedly!*\n*Status :* [ `Kick User` ]',1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿßÿÆÿ±ÿßÿ¨ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.',1, 'md')
end
elseif text == 'lock flood ban' then
database:hset("flooding:settings:"..msg.chat_id_ ,"flood",'ban')
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Lock Message Activation Repeatedly!*\n*Status :* [ `Ban User` ]',1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿ®ŸÜ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.',1, 'md')
end
elseif text == 'lock flood mute' then
database:hset("flooding:settings:"..msg.chat_id_ ,"flood",'mute')
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Lock Message Activation Repeatedly!*\n*Status :* [ `Mute User` ]',1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.',1, 'md')
end
elseif text == 'unlock flood' then
database:hdel("flooding:settings:"..msg.chat_id_ ,"flood")
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Lock Message Sending Has Been Disabled Repeatedly!*',1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ.',1, 'md')
end
end
end
----------------------------------------------------------------------------
database:incr(SUDO.."allmsg")
if msg.content_.game_ then
print("------ G A M E ------")
elseif msg.content_.text_ then
print("------ T E X T ------")
elseif msg.content_.sticker_ then
print("------ S T I C K E R ------")
elseif msg.content_.animation_ then
print("------ G I F ------")
elseif msg.content_.voice_ then
print("------ V O I C E ------")
elseif msg.content_.video_ then
print("------ V I D E O ------")
elseif msg.content_.photo_ then
print("------ P H O T O ------")
elseif msg.content_.document_ then
print("------ D O C U M E N T ------")
elseif msg.content_.audio_  then
print("------ A U D I O ------")
elseif msg.content_.location_ then
print("------ L O C A T I O N ------")
elseif msg.content_.contact_ then
print("------ C O N T A C T ------")
end
----------------------------------------------------------------------------
if not database:get(SUDO.."timeclears:") then
io.popen("rm -rf ~/.telegram-cli/data/sticker/*")
io.popen("rm -rf ~/.telegram-cli/data/photo/*")
io.popen("rm -rf ~/.telegram-cli/data/animation/*")
io.popen("rm -rf ~/.telegram-cli/data/video/*")
io.popen("rm -rf ~/.telegram-cli/data/audio/*")
io.popen("rm -rf ~/.telegram-cli/data/voice/*")
io.popen("rm -rf ~/.telegram-cli/data/temp/*")
io.popen("rm -rf ~/.telegram-cli/data/thumb/*")
io.popen("rm -rf ~/.telegram-cli/data/document/*")
io.popen("rm -rf ~/.telegram-cli/data/profile_photo/*")
io.popen("rm -rf ~/.telegram-cli/data/encrypted/*")
database:setex(SUDO.."timeclears:", 7200, true)
bot.sendMessage(realm_id, 0, 1, '‚Ü´ ÿ™ŸÖÿßŸÖ€å ŸÅÿß€åŸÑ Ÿáÿß€å ÿßÿ∂ÿßŸÅ€å ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØŸá ÿØÿ± ÿ≥ÿ±Ÿàÿ± Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØŸÜÿØ.', 1, 'md')
print("------ All Cache Has Been Cleared ------")
end
----------------------------------------------------------------------------
----------------------------------------------------------------------------
----------------------------------------------------------------------------
----------------------------------------------------------------------------
----------------------------------------------------------------------------
-- Ultrasudo
if text then
----------------------------------------------------------------------------
if is_ultrasudo(msg) then
----------------------------------------------------------------------------
if text:match("^[Tt][Aa][Gg]$") then
local function GetCreator(extra, result, success)
rank = '#TAG\n\n'
for p , t in pairs(result.members_) do
local function Mehdi(y , vahid)
if vahid.username_ then
user_name = '@'..vahid.username_
else
user_name = t.user_id_
end
rank_ = rank..''..user_name..' , '
end
tdcli.getUser(t.user_id_, Mehdi)
end
bot.sendMessage(msg.chat_id_, msg.id_, 1, rank_, 1, 'md')
end
bot.getChannelMembers(msg.chat_id_, 0, 'Recent', 200, GetCreator)
end
----------------------------------------------------------------------------
if text and text:match("^[lL][uU][aA] (.*)") and is_ultrasudo(msg) then
local text = text:match("^[lL][uU][aA] (.*)")
local output = loadstring(text)()
if output == nil then
output = ""
elseif type(output) == "table" then
output = serpent.block(output, {comment = false})
else
utput = "" .. tostring(output)
end
bot.sendMessage(msg.chat_id_, msg.sender_user_id_, 1,output, 1, 'html')
end
----------------------------------------------------------------------------
if text == 'join on' then
if not database:get(SUDO.."forcejoin") then
database:set(SUDO.."forcejoin", true)
bot.sendMessage(msg.chat_id_, msg.id_, 1, "‚Ü´ ÿ≠ÿßŸÑÿ™ ÿ¨Ÿà€åŸÜ ÿßÿ¨ÿ®ÿßÿ±€å ÿ±Ÿàÿ¥ŸÜ ÿ¥ÿØ.", 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, "‚Ü´ ÿ≠ÿßŸÑÿ™ ÿ¨Ÿà€åŸÜ ÿßÿ¨ÿ®ÿßÿ±€å ÿ±Ÿàÿ¥ŸÜ ÿ®ŸàÿØ.", 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'join off' then
if database:get(SUDO.."forcejoin") then
database:del(SUDO.."forcejoin")
bot.sendMessage(msg.chat_id_, msg.id_, 1, "‚Ü´ ÿ≠ÿßŸÑÿ™ ÿ¨Ÿà€åŸÜ ÿßÿ¨ÿ®ÿßÿ±€å ÿÆÿßŸÖŸàÿ¥ ÿ¥ÿØ.", 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, "‚Ü´ ÿ≠ÿßŸÑÿ™ ÿ¨Ÿà€åŸÜ ÿßÿ¨ÿ®ÿßÿ±€å ÿÆÿßŸÖŸàÿ¥ ÿ®ŸàÿØ.", 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'bc' then
function Broad(extra, result)
local txt = result.content_.text_
local list = database:smembers(SUDO.."botgps") or 0
for k,v in pairs(list) do
tdcli.sendText(v, 0, 0, 1, nil, txt, 1, 'md')
end
local kos = database:smembers(SUDO.."botgp") or 0
for k,v in pairs(kos) do
tdcli.sendText(v, 0, 0, 1, nil, txt, 1, 'md')
end
local kr = database:smembers(SUDO.."usersbot") or 0
for k,v in pairs(kr) do
tdcli.sendText(v, 0, 0, 1, nil, txt, 1, 'md')
end
tdcli.sendText(msg.chat_id_, msg.id_, 0, 1, nil, 'Done', 1, 'md')
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),Broad)
end
end
----------------------------------------------------------------------------
if text:match("^fwd (.*)") and msg.reply_to_message_id_ ~= 0 then
local action = text:match("^fwd (.*)")
if action == "sgps" then
local gp = database:smembers(SUDO.."botgps") or 0
local gps = database:scard(SUDO.."botgps") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ®Ÿá '..gps..' ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá ŸÅŸàÿ±Ÿàÿßÿ±ÿØ ÿ¥ÿØ.', 1, 'md')
elseif action == "gps" then
local gp = database:smembers(SUDO.."botgp") or 0
local gps = database:scard(SUDO.."botgp") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ®Ÿá '..gps..' ⁄Øÿ±ŸàŸá ŸÅŸàÿ±Ÿàÿßÿ±ÿØ ÿ¥ÿØ.', 1, 'md')
elseif action == "pv" then
local gp = database:smembers(SUDO.."usersbot") or 0
local gps = database:scard(SUDO.."usersbot") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ®Ÿá '..gps..' ⁄©ÿßÿ±ÿ®ÿ± ŸÅŸàÿ±Ÿàÿßÿ±ÿØ ÿ¥ÿØ.', 1, 'md')
elseif action == "all" then
local gp = database:smembers(SUDO.."usersbot") or 0
local gpspv = database:scard(SUDO.."usersbot") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
local gp = database:smembers(SUDO.."botgps") or 0
local gpss = database:scard(SUDO.."botgps") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
local gp = database:smembers(SUDO.."botgp") or 0
local gps = database:scard(SUDO.."botgp") or 0
for i=1, #gp do
tdcli.forwardMessages(gp[i], msg.chat_id_,{[0] = msg.reply_to_message_id_ }, 0)
end
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Ÿæ€åÿßŸÖ ÿ¥ŸÖÿß ÿ®Ÿá '..gpss..' ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá , '..gps..' ⁄Øÿ±ŸàŸá Ÿà '..gpspv..' ⁄©ÿßÿ±ÿ®ÿ± ŸÅŸàÿ±Ÿàÿßÿ±ÿØ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'backup' then
tdcli.sendDocument(SUDO, 0, 0, 1, nil, './bot.lua', dl_cb, nil)
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ¢ÿÆÿ±€åŸÜ ŸÜÿ≥ÿÆŸá ÿ≥Ÿàÿ±ÿ≥ ÿ®ÿ±ÿß€å ÿ¥ŸÖÿß ÿßÿ±ÿ≥ÿßŸÑ ÿ¥ÿØ.', 1, 'md')
end
----------------------------------------------------------------------------
if text == 'setsudo' then
function prom_reply(extra, result, success)
database:sadd(SUDO..'sudo:',result.sender_user_id_)
local user = result.sender_user_id_
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ÿ®ÿ±Ÿà ÿ®⁄©ÿ≥ ÿ≥ŸàÿØŸà ÿßÿ∂ÿßŸÅ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, user, msg.id_, text, 10, string.len(user))
end
if tonumber(tonumber(msg.reply_to_message_id_)) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text == 'remsudo' then
function prom_reply(extra, result, success)
database:srem(SUDO..'sudo:',result.sender_user_id_)
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' ) ÿßÿ≤ ÿ®ÿ±Ÿà ÿ®⁄©ÿ≥ ÿ≥ŸàÿØŸà ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, text, 10, string.len(result.sender_user_id_))
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text == 'banall' then
if msg.reply_to_message_id_ == 0 then
local user = msg.sender_user_id_
else
function banreply(extra, result, success)
banall(msg,msg.chat_id_,result.sender_user_id_)
end
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),banreply)
end
----------------------------------------------------------------------------
if text:match('^banall (%d+)') then
banall(msg,msg.chat_id_,text:match('banall (%d+)'))
end
----------------------------------------------------------------------------
if text == 'unbanall' then
if msg.reply_to_message_id_ == 0 then
local user = msg.sender_user_id_
else
function unbanreply(extra, result, success)
unbanall(msg,msg.chat_id_,result.sender_user_id_)
end
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),unbanreply)
end
----------------------------------------------------------------------------
if text:match('^unbanall (%d+)') then
unbanall(msg,msg.chat_id_,text:match('unbanall (%d+)'))
end
----------------------------------------------------------------------------
if text == 'reset stats' then
database:del(SUDO.."allmsg")
database:del(SUDO.."botgps")
database:del(SUDO.."botgp")
database:del(SUDO.."usersbot")
database:del(SUDO..'sgpsmessage:')
database:del(SUDO..'gpsmessage:')
database:del(SUDO..'pvmessage:')
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ.', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset sgps$') and is_ultrasudo(msg) then
database:del(SUDO.."botgps")
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá Ÿáÿß€å ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^gps$') and is_ultrasudo(msg) then
database:del(SUDO.."botgp")
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± ⁄Øÿ±ŸàŸá Ÿáÿß€å ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset pv$') and is_ultrasudo(msg) then
database:del(SUDO.."usersbot")
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± Ÿæ€åŸà€å ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset allmsgs$') and is_ultrasudo(msg) then
database:del(SUDO.."allmsg")
database:del(SUDO..'sgpsmessage:')
database:del(SUDO..'gpsmessage:')
database:del(SUDO..'pvmessage:')
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± ŸáŸÖŸá Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset spgsmsgs$') and is_ultrasudo(msg) then
database:del(SUDO..'sgpsmessage:')
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿßÿ≤ ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá Ÿáÿß ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset gpsmsgs$') and is_ultrasudo(msg) then
database:del(SUDO..'gpsmessage:')
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿßÿ≤ ⁄Øÿ±ŸàŸá Ÿáÿß€å ÿ±ÿ®ÿßÿ™ ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text:match('^reset pvmsgs$') and is_ultrasudo(msg) then
database:del(SUDO..'pvmessage:')
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢ŸÖÿßÿ± Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿßÿ≤ Ÿæ€åŸà€å ÿ®ÿ±Ÿàÿ≤ ÿ¥ÿØ !', 1, 'html')
end
----------------------------------------------------------------------------
if text == 'serverinfo' or text == 'Ÿàÿ∂ÿπ€åÿ™ ÿ≥ÿ±Ÿàÿ±' then
local cpu = io.popen("lscpu"):read("*all")
local ram = io.popen("free -m"):read("*all")
local uptime = io.popen("uptime"):read("*all")
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Robot sever info :\n\n‚áú ram info :\n `'..ram..'` \n\n\n‚áú cpu usage :\n `'..cpu..'` \n\n\n‚áú uptime :\n `'..uptime..'` \n‚áú  ', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'Ÿàÿ∂ÿπ€åÿ™ ÿ≥ÿ±Ÿàÿ±  :\n\n‚áú ŸÖÿ¥ÿÆÿµÿßÿ™ Ÿà ŸÅÿ∂ÿß€å ŸÖÿµÿ±ŸÅ€å ÿ±ŸÖ : \n\n\n `'..ram..'` \n‚áú ŸÖÿ¥ÿÆÿµÿßÿ™ Ÿà ŸÅÿ∂ÿß€å ŸÖÿµÿ±ŸÅ€å ÿ≥€å Ÿæ€å €åŸà : \n\n\n `'..cpu..'` \n\n‚áú ÿ¢Ÿæÿ™ÿß€åŸÖ Ÿà ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ ÿ¢ŸÜŸÑÿß€åŸÜ ÿ®ŸàÿØŸÜ Ÿà ÿ™ÿπÿØÿßÿØ €åŸàÿ≤ÿ± Ÿáÿß€å ÿ≥ÿ±Ÿàÿ± :\n `'..uptime..'` \n', 1, 'md')
end
end
----------------------------------------------------------------------------
end -- end is_ultrasudo msg
----------------------------------------------------------------------------
if is_sudo(msg) then
----------------------------------------------------------------------------
if text:match('^setrank (.*)') then
local rank = text:match('setrank (.*)')
function setrank(extra, result, success)
database:set('ranks:'..result.sender_user_id_, rank)
local text = '‚Ü´ ŸÑŸÇÿ® ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' ) ÿ®Ÿá ( '..rank..' ) ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, text, 14, string.len(result.sender_user_id_))
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),setrank)
end
end
----------------------------------------------------------------------------
if text == 'leave' then
bot.changeChatMemberStatus(msg.chat_id_, bot_id, "Left")
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ±ÿ®ÿßÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿÆÿßÿ±ÿ¨ ÿ¥ÿØ.', 1, 'md')
end
----------------------------------------------------------------------------
if text == 'setowner' then
function prom_reply(extra, result, success)
database:sadd(SUDO..'owners:'..msg.chat_id_,result.sender_user_id_)
local user = result.sender_user_id_
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ŸÖÿßŸÑ⁄© ÿ±ÿ®ÿßÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, user, msg.id_, text, 10, string.len(user))
end
if tonumber(tonumber(msg.reply_to_message_id_)) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text and text:match('^setowner (%d+)') then
local user = text:match('setowner (%d+)')
database:sadd(SUDO..'owners:'..msg.chat_id_,user)
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' ) ÿ®Ÿá ŸÖÿßŸÑ⁄© ÿ±ÿ®ÿßÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, user, msg.id_, text, 10, string.len(user))
end
----------------------------------------------------------------------------
if text == 'remowner' then
function prom_reply(extra, result, success)
database:srem(SUDO..'owners:'..msg.chat_id_,result.sender_user_id_)
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' )  ÿßÿ≤ ŸÖÿßŸÑ⁄©€åÿ™ ÿ±ÿ®ÿßÿ™ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, text, 10, string.len(result.sender_user_id_))
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text and text:match('^remowner (%d+)') then
local user = text:match('remowner (%d+)')
database:srem(SUDO..'owners:'..msg.chat_id_,user)
local text = '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..user..' )  ÿßÿ≤ ŸÖÿßŸÑ⁄©€åÿ™ ÿ±ÿ®ÿßÿ™ ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.'
SendMetion(msg.chat_id_, user, msg.id_, text, 10, string.len(user))
end
----------------------------------------------------------------------------
if text == 'clean ownerlist' then
database:del(SUDO..'owners:'..msg.chat_id_)
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿßŸÑ⁄©€åŸÜ ⁄Øÿ±ŸàŸá Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
----------------------------------------------------------------------------
if text == 'reload' or text == 'ÿ®ÿ±Ÿàÿ≤' then
dofile('bot.lua')
io.popen("rm -rf ~/.telegram-cli/data/animation/*")
io.popen("rm -rf ~/.telegram-cli/data/audio/*")
io.popen("rm -rf ~/.telegram-cli/data/document/*")
io.popen("rm -rf ~/.telegram-cli/data/photo/*")
io.popen("rm -rf ~/.telegram-cli/data/sticker/*")
io.popen("rm -rf ~/.telegram-cli/data/temp/*")
io.popen("rm -rf ~/.telegram-cli/data/thumb/*")
io.popen("rm -rf ~/.telegram-cli/data/video/*")
io.popen("rm -rf ~/.telegram-cli/data/voice/*")
io.popen("rm -rf ~/.telegram-cli/data/profile_photo/*")
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'Done :)', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ :)', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'stats' or text == 'ÿ¢ŸÖÿßÿ±' then
local users = database:scard(SUDO.."usersbot") or 0
local sgpsm = database:get(SUDO..'sgpsmessage:') or 0
local gpsm = database:get(SUDO..'gpsmessage:') or 0
local pvm = database:get(SUDO..'pvmessage:') or 0
local gp = database:scard(SUDO.."botgp") or 0
local gps = database:scard(SUDO.."botgps") or 0
local allmgs = database:get(SUDO.."allmsg") or 0
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ Robot stats :\n\n‚áú sgps : [ `'..gps..'` ]\n‚áú sgps msg : [ `'..sgpsm..'` ]\n\n‚áú gps : [ `'..gp..'` ]\n‚áú gps msg : [ `'..gpsm..'` ]\n\n‚áú users : [ `'..users..'` ]\n‚áú users msg : [ `'..pvm..'` ]\n\n‚áú all msg : [ `'..allmgs..'` ]\n\n ', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ¢ŸÖÿßÿ± ÿ±ÿ®ÿßÿ™  : :\n\n‚áú ÿ™ÿπÿØÿßÿØ ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá Ÿáÿß : [ `'..gps..'` ]\n‚áú ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿØÿ± ÿ≥ŸàŸæÿ± ⁄Øÿ±ŸàŸá Ÿáÿß : [ `'..sgpsm..'` ]\n\n‚áú ÿ™ÿπÿØÿßÿØ ⁄Øÿ±ŸàŸá Ÿáÿß : [ `'..gp..'` ]\n‚áú ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿØÿ± ⁄Øÿ±ŸàŸá Ÿáÿß : [ `'..gpsm..'` ]\n\n‚áú ÿ™ÿπÿØÿßÿØ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿ±ÿ®ÿßÿ™ : [ `'..users..'` ]\n‚áú ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿßÿ≤ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ : [ `'..pvm..'` ]\n\n‚áú ÿ™ÿπÿØÿßÿØ ÿ™ŸÖÿßŸÖ€å Ÿæ€åÿßŸÖ Ÿáÿß€å ÿØÿ±€åÿßŸÅÿ™€å ÿ±ÿ®ÿßÿ™ : [ `'..allmgs..'` ]\n\n', 1, 'md')
end
end
----------------------------------------------------------------------------
end -- end is_sudo msg
----------------------------------------------------------------------------
-- owner
if is_owner(msg) then
----------------------------------------------------------------------------
if text:match("^[Ss]etlang (.*)$") or text:match("^ÿ™ŸÜÿ∏€åŸÖ ÿ≤ÿ®ÿßŸÜ (.*)$") then
local langs = {string.match(text, "^(.*) (.*)$")}
if langs[2] == "fa" or langs[2] == "ŸÅÿßÿ±ÿ≥€å" then
if not database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '> ÿ≤ÿ®ÿßŸÜ ÿ±ÿ®ÿßÿ™ ŸáŸÖ ÿß⁄©ŸÜŸàŸÜ ÿ®ÿ± ÿ±Ÿà€å ŸÅÿßÿ±ÿ≥€å ŸÇÿ±ÿßÿ± ÿØÿßÿ±ÿØ !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '> ÿ≤ÿ®ÿßŸÜ ÿ±ÿ®ÿßÿ™ ÿ®Ÿá ŸÅÿßÿ±ÿ≥€å ÿ™ÿ∫€å€åÿ± Ÿæ€åÿØÿß ⁄©ÿ±ÿØ ! ', 1, 'md')
database:del('lang:gp:'..msg.chat_id_)
end
end
if langs[2] == "en" or langs[2] == "ÿßŸÜ⁄ØŸÑ€åÿ≥€å" then
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '> Language Bot is *already* English', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '> Language Bot has been changed to *English* !', 1, 'md')
database:set('lang:gp:'..msg.chat_id_,true)
end
end
end
----------------------------------------------------------------------------
if text == 'config' or text == 'ÿ™ÿ±ŸÅ€åÿπ ⁄©ŸÑ€å' then
local function promote_admin(extra, result, success)
vardump(result)
local chat_id = msg.chat_id_
local admins = result.members_
for i=1 , #admins do
if database:sismember(SUDO..'mods:'..msg.chat_id_,admins[i].user_id_) then
else
database:sadd(SUDO..'mods:'..msg.chat_id_,admins[i].user_id_)
end
end
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ All Admins Have Been Successfully Promoted !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿßÿØŸÖ€åŸÜ Ÿáÿß€å ⁄Øÿ±ŸàŸá ÿØÿ± ÿ±ÿ®ÿßÿ™ ÿ™ÿ±ŸÅ€åÿπ €åÿßŸÅÿ™ŸÜÿØ.', 1, 'md')
end
end
bot.getChannelMembers(msg.chat_id_, 0, 'Administrators', 200, promote_admin)
end
----------------------------------------------------------------------------
if text == 'clean bots' or text == 'Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ±ÿ®ÿßÿ™ Ÿáÿß' then
local function cb(extra,result,success)
local bots = result.members_
for i=0 , #bots do
kick(msg,msg.chat_id_,bots[i].user_id_)
end
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ All Api Robots Were Kicked !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿ™ŸÖÿßŸÖ€å ÿ±ÿ®ÿßÿ™ Ÿáÿß€å (Api)ü§ñ ÿßÿÆÿ±ÿßÿ¨ ÿ¥ÿØŸÜÿØ.', 1, 'md')
end
end
bot.channel_get_bots(msg.chat_id_,cb)
end
----------------------------------------------------------------------------
if text and text:match('^setlink (.*)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸÑ€åŸÜ⁄© (.*)') then
local link = text:match('^setlink (.*)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸÑ€åŸÜ⁄© (.*)')
database:set(SUDO..'grouplink'..msg.chat_id_, link)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ The New Link Was Successfully Saved And Changed !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åŸÜ⁄© ÿØÿ±ÿÆŸàÿßÿ≥ÿ™€å ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'remlink' or text == 'ÿ≠ÿ∞ŸÅ ŸÑ€åŸÜ⁄©' then
database:del(SUDO..'grouplink'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ The Link Was Successfully Deleted !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åŸÜ⁄© ÿ´ÿ®ÿ™ ÿ¥ÿØŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'remrules' or text == 'ÿ≠ÿ∞ŸÅ ŸÇŸàÿßŸÜ€åŸÜ' then
database:del(SUDO..'grouprules'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ Group Rules Have Been Successfully Deleted !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÇŸàÿßŸÜ€åŸÜ ÿ´ÿ®ÿ™ ÿ¥ÿØŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^setrules (.*)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸÇŸàÿßŸÜ€åŸÜ (.*)') then
link = text:match('^setrules (.*)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸÇŸàÿßŸÜ€åŸÜ (.*)')
database:set(SUDO..'grouprules'..msg.chat_id_, link)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ Group Rules Were Successfully Registered !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÇŸàÿßŸÜ€åŸÜ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™€å ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'welcome enable' or text == 'Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ⁄ØŸà€å€å ÿ±Ÿàÿ¥ŸÜ' then
database:set(SUDO..'status:welcome:'..msg.chat_id_,'enable')
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ Welcome Message Was Activated !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å ŸÅÿπÿßŸÑ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'welcome disable' or text == 'Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ⁄ØŸà€å€å ÿÆÿßŸÖŸàÿ¥' then
database:set(SUDO..'status:welcome:'..msg.chat_id_,'disable')
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ Sending Welcome Message Has Been Disabled !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^setwelcome (.*)$') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸàŸÑ⁄©ÿßŸÖ (.*)$') then
local welcome = text:match('^setwelcome (.*)$') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ŸàŸÑ⁄©ÿßŸÖ (.*)$')
database:set(SUDO..'welcome:'..msg.chat_id_,welcome)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'<b>Welcome Message Was Successfully Saved And Changed</b>\n<b>Welcome Message Text :</b>\n{ '..welcome..' }', 1, 'html')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ´ÿ®ÿ™ ÿ¥ÿØ.\n\nŸæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å :\n{ '..welcome..' }', 1, 'html')
end
end
----------------------------------------------------------------------------
if text == 'rem welcome' or text == 'ÿ≠ÿ∞ŸÅ ÿÆŸàÿ¥ÿßŸÖÿØ⁄ØŸà€å€å' then
database:del(SUDO..'welcome:'..msg.chat_id_,welcome)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ä¢ The Welcome Message Was Reset And Set To Default !', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿæ€åÿßŸÖ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿßŸàŸÑ€åŸá ÿ®ÿßÿ≤⁄Øÿ¥ÿ™.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'ownerlist' or text == 'ŸÑ€åÿ≥ÿ™ ŸÖÿßŸÑ⁄©€åŸÜ' then
local list = database:smembers(SUDO..'owners:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
t = '‚Ü´ ownerlist :\n\n'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿßŸÑ⁄©€åŸÜ ⁄Øÿ±ŸàŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - `[ "..v.." ]`\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '_The List Of Owners Of The Group Is Empty_ !'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿßŸÑ⁄©€åŸÜ ⁄Øÿ±ŸàŸá ÿÆÿßŸÑ€å ÿßÿ≥ÿ™ .'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if text == 'promote' or text == 'ÿ™ÿ±ŸÅ€åÿπ' then
function prom_reply(extra, result, success)
database:sadd(SUDO..'mods:'..msg.chat_id_,result.sender_user_id_)
local user = result.sender_user_id_
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Added To The Group Promote List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.', 11, string.len(user))
end
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text and text:match('^promote (%d+)') or text:match('^ÿ™ÿ±ŸÅ€åÿπ (%d+)') then
user = text:match('promote (%d+)') or text:match('^ÿ™ÿ±ŸÅ€åÿπ (%d+)')
database:sadd(SUDO..'mods:'..msg.chat_id_,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Added To The Group Promote List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.', 11, string.len(user))
end
end
----------------------------------------------------------------------------
if text == 'demote' or text == 'ÿπÿ≤ŸÑ' then
function prom_reply(extra, result, success)
database:srem(SUDO..'mods:'..msg.chat_id_,result.sender_user_id_)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ä¢ User [ '..result.sender_user_id_..' ] Was Removed From The Group Promote List !', 9, string.len(result.sender_user_id_))
else
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..result.sender_user_id_..' ) ÿßÿ≤ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 11, string.len(result.sender_user_id_))
end
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),prom_reply)
end
end
----------------------------------------------------------------------------
if text and text:match('^demote (%d+)') or text:match('^ÿπÿ≤ŸÑ (%d+)') then
local user = text:match('demote (%d+)') or text:match('^ÿπÿ≤ŸÑ (%d+)')
database:srem(SUDO..'mods:'..msg.chat_id_,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Removed From The Group Promote List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿßÿ≤ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 11, string.len(user))
end
end
----------------------------------------------------------------------------
if text == 'modlist' or text == 'ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ' then
local list = database:smembers(SUDO..'mods:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
local t = '‚Ü´ modlist :\n\n'
else
local t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - `"..v.."`\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '_The List Of Mods Of The Group Is Empty_ !'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá ÿÆÿßŸÑ€å ŸÖ€åÿ®ÿßÿ¥ÿØ.'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if text == 'clean modlist' or text == 'Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ' then
database:del(SUDO..'mods:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'Modlist has been cleaned!', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±ÿßŸÜ ⁄Øÿ±ŸàŸá Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'setvip' or text == 'ÿ™ŸÜÿ∏€åŸÖ Ÿà€å⁄òŸá' then
function vip(extra, result, success)
database:sadd(SUDO..'vips:'..msg.chat_id_,result.sender_user_id_)
local user = result.sender_user_id_
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Added To The Group Vip List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿπÿ∂Ÿà Ÿà€å⁄òŸá ⁄Øÿ±ŸàŸá ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.', 11, string.len(user))
end
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),vip)
end
end
----------------------------------------------------------------------------
if text and text:match('^setvip (%d+)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ Ÿà€å⁄òŸá (%d+)') then
local user = text:match('setvip (%d+)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ Ÿà€å⁄òŸá (%d+)')
database:sadd(SUDO..'vips:'..msg.chat_id_,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ] Was Added To The Group Vip List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿπÿ∂Ÿà Ÿà€å⁄òŸá ⁄Øÿ±ŸàŸá ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.', 11, string.len(user))
end
end
----------------------------------------------------------------------------
if text == 'remvip' or text == 'ÿ≠ÿ∞ŸÅ Ÿà€å⁄òŸá' then
function MrPokerWkoni(extra, result, success)
database:srem(SUDO..'vips:'..msg.chat_id_,result.sender_user_id_)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ä¢ User [ '..result.sender_user_id_..' ]  ] Was Removed From The Group Vip List !', 9, string.len(result.sender_user_id_))
else
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..result.sender_user_id_..' ) ÿßÿ≤ ŸÑ€åÿ≥ÿ™ ÿπÿ∂Ÿà Ÿáÿß€å Ÿà€å⁄òŸá ⁄Øÿ±ŸàŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 11, string.len(result.sender_user_id_))
end
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),MrPokerWkoni)
end
end
----------------------------------------------------------------------------
if text and text:match('^remvip (%d+)') or text:match('^ÿ≠ÿ∞ŸÅ Ÿà€å⁄òŸá (%d+)') then
local user = text:match('remvip (%d+)') or text:match('^ÿ≠ÿ∞ŸÅ Ÿà€å⁄òŸá (%d+)')
database:srem(SUDO..'vips:'..msg.chat_id_,user)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, user, msg.id_, '‚Ä¢ User [ '..user..' ]  ] Was Removed From The Group Vip List !', 9, string.len(user))
else
SendMetion(msg.chat_id_, user, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ±  ( '..user..' ) ÿßÿ≤ ŸÑ€åÿ≥ÿ™ ÿπÿ∂Ÿà Ÿáÿß€å Ÿà€å⁄òŸá ⁄Øÿ±ŸàŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 11, string.len(user))
end
end
----------------------------------------------------------------------------
if text == 'viplist' or text == 'ŸÑ€åÿ≥ÿ™ Ÿà€å⁄òŸá' then
local list = database:smembers(SUDO..'vips:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
t = '‚Ü´ viplist :\n\n'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ Ÿà€å⁄òŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - `"..v.."`\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '_The List Of vips Of The Group Is Empty_ !'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ Ÿà€å⁄òŸá ÿÆÿßŸÑ€å ŸÖ€åÿ®ÿßÿ¥ÿØ.'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if text == 'clean viplist' or text == 'Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ Ÿà€å⁄òŸá' then
database:del(SUDO..'vips:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'Viplist has been cleaned!', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ Ÿà€å⁄òŸá Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
end -- end is_owner msg
----------------------------------------------------------------------------
-- mods
if is_mod(msg) then
----------------------------------------------------------------------------
if text == 'automuteall enable' or text == 'ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ÿ±Ÿàÿ¥ŸÜ' then
database:set(SUDO..'automuteall'..msg.chat_id_,true)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'Automuteall has been enabled.', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ŸÅÿπÿßŸÑ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'automuteall disable' or text == 'ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ÿÆÿßŸÖŸàÿ¥' then
database:del(SUDO..'automuteall'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'Automuteall has been disabled.', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ⁄Øÿ±ŸàŸá ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text1:match('^(automuteall) (%d+):(%d+)-(%d+):(%d+)$') then
local mehdi = {
string.match(text1, "^(automuteall) (%d+):(%d+)-(%d+):(%d+)$")
}
local endtime = mehdi[4]..mehdi[5]
local endtime1 = mehdi[4]..":"..mehdi[5]
local starttime2 = mehdi[2]..":"..mehdi[3]
database:set(SUDO..'EndTimeSee'..msg.chat_id_,endtime1)
database:set(SUDO..'StartTimeSee'..msg.chat_id_,starttime2)
local starttime = mehdi[2]..mehdi[3]
if endtime1 == starttime2 then
test = [[‚Ü´ ÿ≤ŸÖÿßŸÜ ÿ¥ÿ±Ÿàÿπ ŸÇŸÅŸÑ ÿÆŸàÿØ⁄©ÿßÿ± ŸÜŸÖ€åÿ™ŸàÿßŸÜÿØ ÿ®ÿß ÿ≤ŸÖÿßŸÜ Ÿæÿß€åÿßŸÜ ÿ¢ŸÜ ÿ®ÿ±ÿßÿ®ÿ± ÿ®ÿßÿ¥ÿØ.]]
bot.sendMessage(msg.chat_id_, msg.id_, 1,test, 1, 'md')
else
database:set(SUDO..'automutestart'..msg.chat_id_,starttime)
database:set(SUDO..'automuteend'..msg.chat_id_,endtime)
test= '‚Ü´ ⁄Øÿ±ŸàŸá ÿ¥ŸÖÿß ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿÆŸàÿØ⁄©ÿßÿ± ÿßÿ≤ ÿ≥ÿßÿπÿ™ [ '..starttime2..' ] ŸÇŸÅŸÑ Ÿà ÿØÿ± ÿ≥ÿßÿπÿ™ [ '..endtime1 ..' ] ÿ®ÿßÿ≤ ŸÖ€åÿ¥ŸàÿØ.'
bot.sendMessage(msg.chat_id_, msg.id_, 1,test, 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^warnmax (%d+)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ÿßÿÆÿ∑ÿßÿ± (%d+)') then
local num = text:match('^warnmax (%d+)') or text:match('^ÿ™ŸÜÿ∏€åŸÖ ÿßÿÆÿ∑ÿßÿ± (%d+)')
if 2 > tonumber(num) or tonumber(num) > 10 then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿπÿØÿØ€å ÿ®€åŸÜ 2 ÿ™ÿß 10 Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ.', 1, 'md')
else
database:hset("warn:"..msg.chat_id_ ,"warnmax" ,num)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'warn has been set to [ '..num..' ] number', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿßÿÆÿ∑ÿßÿ± ÿ®Ÿá ( '..num..' ) ÿπÿØÿØ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'md')
end
end
end
----------------------------------------------------------------------------
if text == 'setwarn kick' then
database:hset("warn:"..msg.chat_id_ ,"swarn",'kick')
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿàÿ∂ÿπ€åÿ™ ÿßÿÆÿ∑ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿßÿÆÿ±ÿßÿ¨ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'html')
elseif text == 'setwarn ban' then
database:hset("warn:"..msg.chat_id_ ,"swarn",'ban')
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿàÿ∂ÿπ€åÿ™ ÿßÿÆÿ∑ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿ®ŸÜ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'html')
elseif text == 'setwarn mute' then
database:hset("warn:"..msg.chat_id_ ,"swarn",'mute')
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿàÿ∂ÿπ€åÿ™ ÿßÿÆÿ∑ÿßÿ± ÿ®Ÿá ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'html')
end
----------------------------------------------------------------------------
if (text == 'warn' or text == 'ÿßÿÆÿ∑ÿßÿ±') and tonumber(msg.reply_to_message_id_) > 0 then
function warn_by_reply(extra, result, success)
if tonumber(result.sender_user_id_) == tonumber(bot_id) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'ÿ®ÿßÿ¥Ÿá ÿ®ÿßÿπ€å', 1, 'md')
return false
end
if priv(msg.chat_id_,result.sender_user_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ¨ÿ≤Ÿà ( ŸÖÿßŸÑ⁄©€åŸÜ | ÿ≥ÿßÿ≤ŸÜÿØ⁄ØÿßŸÜ ) ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ®ÿßÿ¥ÿØ!', 1, 'md')
else
local nwarn = tonumber(database:hget("warn:"..result.chat_id_,result.sender_user_id_) or 0)
local wmax = tonumber(database:hget("warn:"..result.chat_id_ ,"warnmax") or 3)
if nwarn == wmax then
database:hset("warn:"..result.chat_id_,result.sender_user_id_,0)
warn(msg,msg.chat_id_,result.sender_user_id_)
else
database:hset("warn:"..result.chat_id_,result.sender_user_id_,nwarn + 1)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'warn has been set to [ '..num..' ] number', 1, 'md')
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ User ( '..result.sender_user_id_..' )  Due to non-observance of the rules, you received a warning from the robot management regarding the number of your warns :  '..(nwarn + 1)..'/'..wmax..'', 9, string.len(result.sender_user_id_))
else
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' )  ÿ®Ÿá ÿØŸÑ€åŸÑ ÿ±ÿπÿß€åÿ™ ŸÜ⁄©ÿ±ÿØŸÜ ŸÇŸàÿßŸÜ€åŸÜ ÿßÿ≤ ŸÖÿØ€åÿ±€åÿ™ ÿ±ÿ®ÿßÿ™ ÿßÿÆÿ∑ÿßÿ± ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿ±ÿØ€åÿØ ÿ™ÿπÿØÿßÿØ ÿßÿÆÿ∑ÿßÿ± Ÿáÿß€å ÿ¥ŸÖÿß :  '..(nwarn + 1)..'/'..wmax..'', 10, string.len(result.sender_user_id_))
end
end
end
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),warn_by_reply)
end
----------------------------------------------------------------------------
if (text == 'unwarn' or text == 'ÿ≠ÿ∞ŸÅ ÿßÿÆÿ∑ÿßÿ±') and tonumber(msg.reply_to_message_id_) > 0 then
function unwarn_by_reply(extra, result, success)
if priv(msg.chat_id_,result.sender_user_id_) then
else
if not database:hget("warn:"..result.chat_id_,result.sender_user_id_) then
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ User ( '..result.sender_user_id_..' ) has not received any warns', 9, string.len(result.sender_user_id_))
else
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' ) Ÿá€å⁄Ü ÿßÿÆÿ∑ÿßÿ±€å ŸÜÿØÿßÿ±ÿØ.', 10, string.len(result.sender_user_id_))
end
local warnhash = database:hget("warn:"..result.chat_id_,result.sender_user_id_)
else database:hdel("warn:"..result.chat_id_,result.sender_user_id_,0)
if database:get('lang:gp:'..msg.chat_id_) then
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ user ( '..result.sender_user_id_..' ) cleared all his warnings.', 9, string.len(result.sender_user_id_))
else
SendMetion(msg.chat_id_, result.sender_user_id_, msg.id_, '‚Ü´ ⁄©ÿßÿ±ÿ®ÿ± ( '..result.sender_user_id_..' ) ÿ™ŸÖÿßŸÖ ÿßÿÆÿ∑ÿßÿ± Ÿáÿß€åÿ¥ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØŸÜÿØ.', 10, string.len(result.sender_user_id_))
end
end
end
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),unwarn_by_reply)
end
----------------------------------------------------------------------------
if text and (text:match('^help') or text:match('^ÿ±ÿßŸáŸÜŸÖÿß$'))and check_user(msg) and not msg.forward_info_ then
text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÇŸÅŸÑ€å Ÿà ÿ≠ÿßŸÑÿßÿ™ ÿ¢ŸÜ :

`ÿ±ÿßŸáŸÜŸÖÿß€å ŸÇŸÅŸÑ€å`

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿØ€åÿ±€åÿ™€å :

`ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿØ€åÿ±€åÿ™€å`

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿ±ÿßŸáŸÜŸÖÿß€å ÿ≥⁄©Ÿàÿ™ :

`ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿ≠ÿØŸàÿØ€åÿ™€å`

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿß⁄©ÿ≥ÿßÿ≤€å :

`ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿß⁄©ÿ≥ÿßÿ≤€å`

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™ ÿπŸÖŸàŸÖ€å Ÿà ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™ ŸÅÿßŸÜ :

`ÿ±ÿßŸáŸÜŸÖÿß€å ÿπŸÖŸàŸÖ€å`

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™ ÿµÿßÿ≠ÿ® ÿ±ÿ®ÿßÿ™ :

`ÿ±ÿßŸáŸÜŸÖÿß€å ÿ≥ŸàÿØŸà`

‚ö†Ô∏è ŸÅŸÇÿ∑ ŸÖÿ™ŸÜ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ™ÿß€åŸæ ⁄©ŸÜ€åÿØ !

ŸÇÿ®ŸÑ ÿßÿ≤ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ±ÿ®ÿßÿ™ ŸÑÿ∑ŸÅÿß ŸÇŸàÿßŸÜ€åŸÜ ÿ±ÿ®ÿßÿ™ ÿ±ÿß ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÜ€åÿØ Ÿà ÿß⁄Øÿ± ÿ®Ÿá ŸÖÿ¥⁄©ŸÑ€å ÿÆŸàÿ±ÿØ€åÿØ ÿßÿ≤ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ⁄©ŸÖ⁄© ÿ®⁄Ø€åÿ±€åÿØ ...

ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ŸÇŸàÿßŸÜ€åŸÜ ÿ±ÿ®ÿßÿ™ :

`ŸÇŸàÿßŸÜ€åŸÜ ÿ±ÿ®ÿßÿ™`

ÿ®ÿ±ÿß€å ÿ™ŸÖÿßÿ≥ ÿ®ÿß Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å :

`Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å`
]]

bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'md')
end


----------------------------------------------------------------------------
local function getsettings(value)
if value == 'muteall' then
local hash = database:get(SUDO..'muteall'..msg.chat_id_)
if hash then
return '( ŸÅÿπÿßŸÑ ‚úì )'
else
return '( ÿ∫€åÿ±ŸÅÿπÿßŸÑ ‚úò )'
end
elseif value == 'welcome' then
local hash = database:get(SUDO..'welcome:'..msg.chat_id_)
if hash == 'enable' then
return '( ŸÅÿπÿßŸÑ ‚úì )'
else
return '( ÿ∫€åÿ±ŸÅÿπÿßŸÑ ‚úò )'
end
elseif value == 'spam' then
local hash = database:hget("flooding:settings:"..msg.chat_id_,"flood")
if hash then
if database:hget("flooding:settings:"..msg.chat_id_, "flood") == "kick" then
return '( ŸÅÿπÿßŸÑ - ÿßÿÆÿ±ÿßÿ¨ )'
elseif database:hget("flooding:settings:"..msg.chat_id_,"flood") == "ban" then
return '( ŸÅÿπÿßŸÑ - ÿ®ŸÜ )'
elseif database:hget("flooding:settings:"..msg.chat_id_,"flood") == "mute" then
return '( ŸÅÿπÿßŸÑ - ÿ≥ÿß€åŸÑŸÜÿ™ )'
end
else
return '( ÿ∫€åÿ±ŸÅÿπÿßŸÑ ‚úò )'
end
elseif is_lock(msg,value) then
return  '( ŸÅÿπÿßŸÑ ‚úì )'
else
return '( ÿ∫€åÿ±ŸÅÿπÿßŸÑ ‚úò )'
end
end
----------------------------------------------------------------------------
if text == 'settings' or text == 'ÿ™ŸÜÿ∏€åŸÖÿßÿ™' then
local wmax = tonumber(database:hget("warn:"..msg.chat_id_ ,"warnmax") or 3)
local text = '‚Ü´ ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿßÿµŸÑ€å ⁄Øÿ±ŸàŸá :\n\n'
..'‚áú ŸÇŸÅŸÑ ŸÑ€åŸÜ⁄© : '..getsettings('links')..'\n'
..'‚áú ŸÇŸÅŸÑ ÿ±ÿ®ÿßÿ™ : '..getsettings('bot')..'\n'
..'‚áú ŸÇŸÅŸÑ ÿ™⁄Ø : '..getsettings('tag')..'\n'
..'‚áú ŸÇŸÅŸÑ ÿ±⁄Øÿ®ÿßÿ± : '..getsettings('spam')..'\n'
..'‚áú ŸÇŸÅŸÑ €åŸàÿ≤ÿ±ŸÜ€åŸÖ : '..getsettings('username')..'\n'
..'‚áú ŸÇŸÅŸÑ ŸÅŸàÿ±Ÿàÿßÿ±ÿØ : '..getsettings('forward')..'\n'
..'‚áú ÿ™ÿπÿØÿßÿØ ÿ±⁄Øÿ®ÿßÿ± : [ '..NUM_MSG_MAX..' ]\n'
..'‚áú ÿ≤ŸÖÿßŸÜ ÿ±⁄Øÿ®ÿßÿ± : [ '..TIME_CHECK..' ]\n\n'
..'‚Ü´ ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ŸÅÿ±ÿπ€å ⁄Øÿ±ŸàŸá :\n\n'
..'‚ú§ ŸÇŸÅŸÑ Ÿæÿßÿ≥ÿÆ : '..getsettings('reply')..'\n'
.. '‚ú§ ŸÇŸÅŸÑ ŸÅÿ≠ÿ¥ : '..getsettings('fosh')..'\n'
.. '‚ú§ ŸÇŸÅŸÑ ÿ™ÿ®⁄Ü€å : '..getsettings('tabchi')..'\n'
..'‚ú§ ŸÇŸÅŸÑ Ÿàÿ±ŸàÿØ€å : '..getsettings('join')..'\n'
..'‚ú§ ŸÇŸÅŸÑ ŸÅÿßÿ±ÿ≥€å : '..getsettings('persian')..'\n'
..'‚ú§ ŸÇŸÅŸÑ ÿ≥ŸÜÿ¨ÿßŸÇ : '..getsettings('pin')..'\n'
.. '‚ú§ ŸÇŸÅŸÑ ÿß€åŸÖŸàÿ¨€å : '..getsettings('emoji')..'\n'
.. '‚ú§ ŸÇŸÅŸÑ ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™ : '..getsettings('cmd')..'\n'
..'‚ú§ ÿÆŸàÿ¥ÿßŸÖÿØ ⁄ØŸà€å€å : '..getsettings('welcome')..'\n'
..'‚ú§ ŸÇŸÅŸÑ ÿßŸÜ⁄Ø€åŸÑ€åÿ≥€å : '..getsettings('english')..'\n'
.. '‚ú§ ŸÇŸÅŸÑ ŸÅ€åŸÑŸÖ ÿ≥ŸÑŸÅ€å : '..getsettings('selfvideo')..'\n'
..'‚ú§ ŸÇŸÅŸÑ Ÿæ€åÿßŸÖ ÿ≥ÿ±Ÿà€åÿ≥€å : '..getsettings('tgservice')..'\n'
..'‚ú§ ŸÇŸÅŸÑ ÿØ⁄©ŸÖŸá ÿ¥€åÿ¥Ÿá ÿß€å : '..getsettings('inline')..'\n\n'
..'‚Ü´ ÿ™ŸÜÿ∏€åŸÖÿßÿ™ ÿ±ÿ≥ÿßŸÜŸá ⁄Øÿ±ŸàŸá :\n\n'
..'‚ú¶ ŸÇŸÅŸÑ ÿµÿØÿß : '..getsettings('voice')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ⁄Ø€åŸÅ : '..getsettings('gif')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ŸÅÿß€åŸÑ : '..getsettings('file')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ŸÖÿ™ŸÜ : '..getsettings('text')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ŸÅ€åŸÑŸÖ : '..getsettings('video')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ÿ®ÿßÿ≤€å : '..getsettings('game')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ÿπ⁄©ÿ≥ : '..getsettings('photo')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ŸÖŸàÿ≤€å⁄© : '..getsettings('music')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ÿßÿ≥ÿ™€å⁄©ÿ± : '..getsettings('sticker')..'\n'
..'‚ú¶ ŸÇŸÅŸÑ ŸÖÿÆÿßÿ∑ÿ® : '..getsettings('contact')..'\n\n'
.."‚Ü´ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ⁄Øÿ±ŸàŸá :\n\n"
.."‚á¶ ÿ™ÿπÿØÿßÿØ ÿßÿÆÿ∑ÿßÿ± : ( `"..wmax.."/10` )\n"
..'‚á¶ ŸÇŸÅŸÑ ⁄Øÿ±ŸàŸá : '..getsettings('muteall')..'\n'
.."‚á¶ ÿ¢€åÿØ€å ÿ¥ÿÆÿµ : ( `"..msg.sender_user_id_.."` )\n"
.."‚á¶ ÿ¢€åÿØ€å ⁄Øÿ±ŸàŸá : ( `"..msg.chat_id_.."` )\n\n"
bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'md')
end
-------------------------------------------------Flood------------------------------------------------
if text and text:match('^setfloodmax (%d+)$') then
database:hset("flooding:settings:"..msg.chat_id_ ,"floodmax" ,text:match('setfloodmax (.*)'))
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'*The Maximum Message Sending Speed Is Set To :* [ `'..text:match('setfloodmax (.*)')..'` ]', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿßÿ±ÿ≥ÿßŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ®Ÿá ( `'..text:match('setfloodmax (.*)')..'` ) ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^setfloodtime (%d+)$') then
database:hset("flooding:settings:"..msg.chat_id_ ,"floodtime" ,text:match('setfloodtime (.*)'))
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'*Maximum Reception Recognition Time Set to :* [ `'..text:match('setfloodtime (.*)')..'` ]', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿ≤ŸÖÿßŸÜ ÿßÿ±ÿ≥ÿßŸÑ ÿ±⁄Øÿ®ÿßÿ± ÿ®Ÿá ( `'..text:match('setfloodtime (.*)')..'` ) ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'link' or text == 'ŸÑ€åŸÜ⁄©' then
local link = database:get(SUDO..'grouplink'..msg.chat_id_)
if link then
if database:get('lang:gp:'..msg.chat_id_) then
 bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Group Link :* \n'..link, 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÑ€åŸÜ⁄© ⁄Øÿ±ŸàŸá :  \n'..link, 1, 'md')
end
else
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*The Link To The Group Has Not Been Set*\n*Register New Link With Command*\n/setlink link\n*It Is Possible.*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÑ€åŸÜ⁄©€å ÿ®ÿ±ÿß€å ⁄Øÿ±ŸàŸá ÿ™ŸÜÿ∏€åŸÖ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™ !', 1, 'md')
end
end
end
----------------------------------------------------------------------------
if text == 'rules' or text == 'ŸÇŸàÿßŸÜ€åŸÜ' then
local rules = database:get(SUDO..'grouprules'..msg.chat_id_)
if rules then
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Group Rules :* \n'..rules, 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸàÿßŸÜ€åŸÜ ⁄Øÿ±ŸàŸá : \n'..rules, 1, 'md')
end
else
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Rules Are Not Set For The Group.*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇÿßŸÜŸàŸÜ€å ÿ®ÿ±ÿß€å ⁄Øÿ±ŸàŸá ÿ™ŸÜÿ∏€åŸÖ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™ !', 1, 'md')
end
end
end
----------------------------------------------------------------------------
if text == 'mutechat' or text == 'ŸÇŸÅŸÑ ⁄Üÿ™' then
database:set(SUDO..'muteall'..msg.chat_id_,true)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*Filter All Conversations Enabled!*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ⁄Üÿ™ ŸÅÿπÿßŸÑ ÿ¥ÿØ .', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'unmutechat' or text == 'ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ⁄Üÿ™' then
database:del(SUDO..'muteall'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*All Conversations Filtered Disabled!*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ŸÇŸÅŸÑ ⁄Üÿ™ ÿ∫€åÿ±ŸÅÿπÿßŸÑ ÿ¥ÿØ .', 1, 'md')
end
end
----------------------------------------------------------------------------
if (text == 'kick' or text == 'ÿßÿÆÿ±ÿßÿ¨') and tonumber(msg.reply_to_message_id_) > 0 then
function kick_by_reply(extra, result, success)
kick(msg,msg.chat_id_,result.sender_user_id_)
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),kick_by_reply)
end
----------------------------------------------------------------------------
if text and text:match('^kick (%d+)') then
kick(msg,msg.chat_id_,text:match('kick (%d+)'))
end
if text and text:match('^ÿßÿÆÿ±ÿßÿ¨ (%d+)') then
kick(msg,msg.chat_id_,text:match('ÿßÿÆÿ±ÿßÿ¨ (%d+)'))
end
-------------------------------------------------Ban-------------------------------------------------
if (text == 'ban' or text == 'ŸÖÿ≥ÿØŸàÿØ') and tonumber(msg.reply_to_message_id_) > 0 then
function banreply(extra, result, success)
ban(msg,msg.chat_id_,result.sender_user_id_)
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),banreply)
end
----------------------------------------------------------------------------
if text and text:match('^ban (%d+)') then
ban(msg,msg.chat_id_,text:match('ban (%d+)'))
end
if text and text:match('^ŸÖÿ≥ÿØŸàÿØ (%d+)') then
ban(msg,msg.chat_id_,text:match('ŸÖÿ≥ÿØŸàÿØ (%d+)'))
end
----------------------------------------------------------------------------
if (text == 'unban' or text == 'ŸÑÿ∫Ÿà ŸÖÿ≥ÿØŸàÿØ€åÿ™') and tonumber(msg.reply_to_message_id_) > 0 then
function unbanreply(extra, result, success)
unban(msg,msg.chat_id_,result.sender_user_id_)
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),unbanreply)
end
----------------------------------------------------------------------------
if text and text:match('^unban (%d+)') then
unban(msg,msg.chat_id_,text:match('unban (%d+)'))
end
if text and text:match('^ŸÑÿ∫Ÿà ŸÖÿ≥ÿØŸàÿØ€åÿ™ (%d+)') then
unban(msg,msg.chat_id_,text:match('ŸÑÿ∫Ÿà ŸÖÿ≥ÿØŸàÿØ€åÿ™ (%d+)'))
end
----------------------------------------------------------------------------
if text == 'banlist' or text == 'ŸÑ€åÿ≥ÿ™ ŸÖÿ≥ÿØŸàÿØ' then
local list = database:smembers(SUDO..'banned'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
t = '‚Ü´ banlist :\n\n'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ®ŸÜ ÿ¥ÿØŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - `"..v.."`\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '*The List Of Member Blocked Is Empty.*'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ®ŸÜ ÿ¥ÿØŸá ÿÆÿßŸÑ€å ŸÖ€åÿ®ÿßÿ¥ÿØ.'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if text == 'clean banlist' then
database:del(SUDO..'banned'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'*The List Of Blocked Users From The Group Was Successfully Deleted.*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ®ŸÜ ÿ¥ÿØŸá Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if (text == 'silent' or text == 'ÿ≥⁄©Ÿàÿ™') and tonumber(msg.reply_to_message_id_) > 0 then
function mutereply(extra, result, success)
mute(msg,msg.chat_id_,result.sender_user_id_)
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),mutereply)
end
----------------------------------------------------------------------------
if text and text:match('^silent (%d+)') then
mute(msg,msg.chat_id_,text:match('silent (%d+)'))
end
if text and text:match('^ÿ≥⁄©Ÿàÿ™ (%d+)') then
mute(msg,msg.chat_id_,text:match('ÿ≥⁄©Ÿàÿ™ (%d+)'))
end
----------------------------------------------------------------------------
if (text == 'unsilent' or text == 'ŸÑÿ∫Ÿà ÿ≥⁄©Ÿàÿ™') and tonumber(msg.reply_to_message_id_) > 0 then
function unmutereply(extra, result, success)
unmute(msg,msg.chat_id_,result.sender_user_id_)
end
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),unmutereply)
end
----------------------------------------------------------------------------
if text and text:match('^unsilent (%d+)') then
unmute(msg,msg.chat_id_,text:match('unsilent (%d+)'))
end
if text and text:match('^ŸÑÿ∫Ÿà ÿ≥⁄©Ÿàÿ™ (%d+)') then
unmute(msg,msg.chat_id_,text:match('ŸÑÿ∫Ÿà ÿ≥⁄©Ÿàÿ™ (%d+)'))
end
----------------------------------------------------------------------------
if text == 'silentlist' or text == 'ŸÑ€åÿ≥ÿ™ ÿ≥⁄©Ÿàÿ™' then
local list = database:smembers(SUDO..'mutes'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
t = '*User List Silent Mode :*\n\n'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ≥ÿß€åŸÑŸÜÿ™ ÿ¥ÿØŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - `"..v.."`\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '*The List Of Silent Member Is Empty !*'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ≥ÿß€åŸÑŸÜÿ™ ÿ¥ÿØŸá ÿÆÿßŸÑ€å ŸÖ€åÿ®ÿßÿ¥ÿØ.'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if text == 'clean silentlist' or text == 'Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ÿ≥⁄©Ÿàÿ™' then
database:del(SUDO..'mutes'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'*List of Member In The List The Silent List Was Successfully Deleted.*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ€å ⁄©Ÿá ÿØÿ± ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ Ÿáÿ≥ÿ™ŸÜÿØ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^del (%d+)$') or text:match('^Ÿæÿß⁄©ÿ≥ÿßÿ≤€å (%d+)$') then
local limit = tonumber(text:match('^del (%d+)$') or text:match('^ÿ≠ÿ∞ŸÅ (%d+)$'))
if limit > 1000 then
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '*The Number Of Messages Entered Is Greater Than The Limit (*`1000` *messages)*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ¥ŸÖÿß ÿØÿ± Ÿáÿ± ÿ®ÿßÿ± Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÅŸÇÿ∑ ŸÖ€åÿ™ŸàÿßŸÜ€åÿØ ( 100 ) Ÿæ€åÿßŸÖ ⁄Øÿ±ŸàŸá ÿ±ÿß Ÿæÿß⁄© ⁄©ŸÜ€åÿØ!', 1, 'md')
end
else
function cb(a,b,c)
local msgs = b.messages_
for i=1 , #msgs do
delete_msg(msg.chat_id_,{[0] = b.messages_[i].id_})
end
end
bot.getChatHistory(msg.chat_id_, 0, 0, limit + 1,cb)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'[ `'..limit..'` ] *Recent Group Messages Deleted !*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿ™ÿπÿØÿßÿØ ( `'..limit..'` ) Ÿæ€åÿßŸÖ ⁄Øÿ±ŸàŸá Ÿæÿß⁄© ÿ¥ÿØ.', 1, 'md')
end
end
end
----------------------------------------------------------------------------
if tonumber(msg.reply_to_message_id_) > 0 then
if text == "del" then
delete_msg(msg.chat_id_,{[0] = tonumber(msg.reply_to_message_id_),msg.id_})
end
end
-------------------------------------------------Filter Word-------------------------------------------------
if text and text:match('^filter (.*)') or text:match('^ŸÅ€åŸÑÿ™ÿ± (.*)') then
local w = text:match('^filter (.*)') or text:match('^ŸÅ€åŸÑÿ™ÿ± (.*)')
database:sadd(SUDO..'filters:'..msg.chat_id_,w)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'[` '..w..'` ] *Was Added To The List Of Filtered Words!*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿπÿ®ÿßÿ±ÿ™ ( '..w..' ) ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ⁄©ŸÑŸÖÿßÿ™ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.', 1, 'html')
end
end
----------------------------------------------------------------------------
if text and text:match('^unfilter (.*)') or text:match('^ÿ≠ÿ∞ŸÅ ŸÅ€åŸÑÿ™ÿ± (.*)') then
local w = text:match('^unfilter (.*)') or text:match('^ÿ≠ÿ∞ŸÅ ŸÅ€åŸÑÿ™ÿ± (.*)')
database:srem(SUDO..'filters:'..msg.chat_id_,w)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'[ `'..w..'` ] Was Deleted From The Filtered List', 1, 'html')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ÿπÿ®ÿßÿ±ÿ™ ( '..w..' ) ÿßÿ≤ ŸÑ€åÿ≥ÿ™ ⁄©ŸÑŸÖÿßÿ™ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØ.', 1, 'html')
end
end
----------------------------------------------------------------------------
if text == 'clean filterlist' or text == 'Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ŸÅ€åŸÑÿ™ÿ±' then
database:del(SUDO..'filters:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1,'*All Filtered Words Have Been Successfully Deleted.*', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ŸÑŸÖÿßÿ™ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ¥ÿØ.', 1, 'md')
end
end
----------------------------------------------------------------------------
if text == 'filterlist' or text == 'ŸÑ€åÿ≥ÿ™ ŸÅ€åŸÑÿ™ÿ±' then
local list = database:smembers(SUDO..'filters:'..msg.chat_id_)
if database:get('lang:gp:'..msg.chat_id_) then
t = '*List Of Words Filtered In Group :*\n\n'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ŸÑŸÖÿßÿ™ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá :\n\n'
end
for k,v in pairs(list) do
t = t..k.." - "..v.."\n"
end
if #list == 0 then
if database:get('lang:gp:'..msg.chat_id_) then
t = '*Filtered Word List Is Empty*'
else
t = '‚Ü´ ŸÑ€åÿ≥ÿ™ ⁄©ŸÑŸÖÿßÿ™ ŸÅ€åŸÑÿ™ÿ± ÿ¥ÿØŸá ÿÆÿßŸÑ€å ŸÖ€åÿ®ÿßÿ¥ÿØ.'
end
end
bot.sendMessage(msg.chat_id_, msg.id_, 1,t, 1, 'md')
end
----------------------------------------------------------------------------
if (text == 'pin' or text == 'ÿ≥ŸÜÿ¨ÿßŸÇ') and msg.reply_to_message_id_ ~= 0 then
local id = msg.id_
local msgs = {[0] = id}
pin(msg.chat_id_,msg.reply_to_message_id_,0)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.reply_to_message_id_, 1, "*Your message was pinned*", 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.reply_to_message_id_, 1, "‚Ü´ Ÿæ€åÿßŸÖ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿ≥ŸÜÿ¨ÿßŸÇ ÿ¥ÿØ.", 1, 'md')
end
end
----------------------------------------------------------------------------
if (text == 'unpin' or text == 'ÿ≠ÿ∞ŸÅ ÿ≥ŸÜÿ¨ÿßŸÇ') and msg.reply_to_message_id_ ~= 0 then
local id = msg.id_
local msgs = {[0] = id}
unpin(msg.chat_id_,msg.reply_to_message_id_,0)
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.reply_to_message_id_, 1, "*message unpinned*", 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.reply_to_message_id_, 1, "‚Ü´ Ÿæ€åÿßŸÖ ÿ≥ŸÜÿ¨ÿßŸÇ ÿ¥ÿØŸá ÿ®ÿ±ÿØÿßÿ¥ÿ™Ÿá ÿ¥ÿØ.", 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('whois (%d+)') then
local id = text:match('whois (%d+)')
local text = '⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ !'
tdcli_function ({ID="SendMessage", chat_id_=msg.chat_id_, reply_to_message_id_=msg.id_, disable_notification_=0, from_background_=1, reply_markup_=nil, input_message_content_={ID="InputMessageText", text_=text, disable_web_page_preview_=1, clear_draft_=0, entities_={[0] = {ID="MessageEntityMentionName", offset_=0, length_=11, user_id_=id}}}}, dl_cb, nil)
end
----------------------------------------------------------------------------
if text == "id" then
function id_by_reply(extra, result, success)
bot.sendMessage(msg.chat_id_, msg.id_, 1, '‚Ü´ ÿ¢€åÿØ€å ÿ¥ÿÆÿµ : ( `'..result.sender_user_id_..'` )', 1, 'md')
end
if tonumber(msg.reply_to_message_id_) == 0 then
else
bot.getMessage(msg.chat_id_, tonumber(msg.reply_to_message_id_),id_by_reply)
end
end
----------------------------------------------------------------------------
end -- end is_mod msg
----------------------------------------------------------------------------
-- memeber
----------------------------------------------------------------------------
if text and text:match('^[Aa]ctive') and not database:get(SUDO.."active:"..msg.chat_id_) then
database:set(SUDO.."active:"..msg.chat_id_, true)
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿ¥ŸÖÿß ÿØÿ± ÿ≠ÿßŸÑ ŸÜÿµÿ® ÿ±ÿ®ÿßÿ™ ÿ®ÿ±ÿß€å ⁄Øÿ±ŸàŸá ÿÆŸàÿØ ŸÖ€åÿ®ÿßÿ¥€åÿØ !\n\n\nŸÑÿ∑ŸÅÿß ÿ®ÿ±ÿß€å ÿ™⁄©ŸÖ€åŸÑ ⁄©ÿ±ÿØŸÜ ŸÜÿµÿ® ÿØÿ≥ÿ™Ÿàÿ± ÿ≤€åÿ± ÿ±ÿß Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ :\n\n/setme\n\nÿ®ÿß Ÿàÿßÿ±ÿØ ⁄©ÿ±ÿØŸÜ ÿß€åŸÜ ÿØÿ≥ÿ™Ÿàÿ± ÿ¥ŸÖÿß ŸÖÿßŸÑ⁄© ÿ±ÿ®ÿßÿ™ ŸÖ€åÿ¥Ÿà€åÿØ !\n\n‚Ä¢ Ch : '..botchannel..' \n ⁄ØŸæ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å : \n '..supportgp..'', 1, 'html')
tdcli.forwardMessages(realm_id, msg.chat_id_,{[0] = msg.id_}, 0)
elseif text and text:match('^[Ss]etme') and not database:get(SUDO.."omg:"..msg.chat_id_) then
database:sadd(SUDO.."owners:"..msg.chat_id_, msg.sender_user_id_)
database:set(SUDO.."omg:"..msg.chat_id_, true)
bot.sendMessage(msg.chat_id_, msg.id_, 1, 'ÿ¥ŸÖÿß ÿ®ÿß ŸÖŸàŸÅ€åÿ™ ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ŸÖÿßŸÑ⁄© ÿ±ÿ®ÿßÿ™ ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØ€åÿØ.\n\n\nŸÑÿ∑ŸÅÿß ÿ®ÿ±ÿß€å ÿØÿ±€åÿßŸÅÿ™ ÿ±ÿßŸáŸÜŸÖÿß ÿØÿ≥ÿ™Ÿàÿ± ÿ≤€åÿ± ÿ±ÿß ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ€åÿØ :\n\n/help\n\nŸÑÿ∑ŸÅÿß ÿ®ÿ±ÿß ÿ≠ŸÖÿß€åÿ™ ÿßÿ≤ ÿ±ÿ®ÿßÿ™ Ÿà ÿ™€åŸÖ ŸÖÿß. ŸÖÿßÿ±ÿß ÿ®Ÿá ÿßÿ¥ÿ™ÿ±ÿß⁄© ÿ®ÿ≤ÿßÿ±€åÿØ.\n\n‚û¢ Ch : '..botchannel..' \n ⁄ØŸæ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å : \n '..supportgp..'', 1, 'html')
tdcli.forwardMessages(realm_id, msg.chat_id_,{[0] = msg.id_}, 0)
end
----------------------------------------------------------------------------
if text and msg_type == 'text' and not is_muted(msg.chat_id_,msg.sender_user_id_) then
----------------------------------------------------------------------------
if text == "ÿ±ÿ®ÿßÿ™" then
if database:get('ranks:'..msg.sender_user_id_) then
local rank =  database:get('ranks:'..msg.sender_user_id_)
local  k = {"ÿ¨ŸàŸÜŸÖ","ÿ¨ÿßŸÜŸÖ","ÿ®ŸÜÿßŸÑ","⁄Ü€åŸá ŸáŸÖÿ¥ ÿµÿØÿßŸÖ ŸÖ€å⁄©ŸÜ€å","ÿÆÿ≥ÿ™ŸÖ ⁄©ÿ±ÿØ€å","ÿ®ŸÑŸáŸáŸá" ,"ÿ®⁄ØŸà"}
bot.sendMessage(msg.chat_id_, msg.id_, 1,''..k[math.random(#k)]..' '..rank..'',1,'md')
else
local p = {"⁄ÜŸá ÿπÿ¨ÿ®","ÿ¨ŸàŸÜŸÖ","ÿ¨ÿßŸÜŸÖ","üòê","ÿ®ŸÜÿßŸÑ","⁄Ü€åŸá ŸáŸÖÿ¥ ÿµÿØÿßŸÖ ŸÖ€å⁄©ŸÜ€å","ÿÆÿ≥ÿ™ŸÖ ⁄©ÿ±ÿØ€å","ÿ®ŸÑŸáŸáŸá","üòï" ,"ÿ®⁄ØŸà","üòê"}
bot.sendMessage(msg.chat_id_, msg.id_, 1,''..p[math.random(#p)]..'', 1, 'html')
end
end
----------------------------------------------------------------------------

if text and text:match('^[Mm]e') or text:match("^ŸÖŸÜ$") then
local rank =  database:get('ranks:'..msg.sender_user_id_) or '------'
local msgs = database:get(SUDO..'total:messages:'..msg.chat_id_..':'..msg.sender_user_id_)
if is_ultrasudo(msg) then
t = 'ÿµÿßÿ≠ÿ® ÿ±ÿ®ÿßÿ™'
elseif is_sudo(msg) then
t = 'ŸÖÿØ€åÿ± ÿ±ÿ®ÿßÿ™'
elseif is_owner(msg) then
t = 'ŸÖÿßŸÑ⁄© ⁄Øÿ±ŸàŸá'
elseif is_mod(msg) then
t = 'ŸÖÿØ€åÿ± ⁄Øÿ±ŸàŸá'
elseif is_vip(msg) then
t = '⁄©ÿßÿ±ÿ®ÿ± Ÿà€å⁄òŸá'
else
t = 'ŸÅÿ±ÿØ ÿπÿßÿØ€å'
end
local nwarn = database:hget("warn:"..msg.chat_id_,msg.sender_user_id_) or 0
if database:get('lang:gp:'..msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª Your ID : [ `'..msg.sender_user_id_..'` ]\n¬ª Gp ID : [ `'..msg.chat_id_..'` ]\n¬ª Access level : [ '..t..' ]\n¬ª Warns : [ `'..nwarn ..'` ]\n‚Ü´ Your msgs : [ `'..msgs..'` ]\n‚Ü´ Your rank : [ '..rank..' ]\n\n', 1, 'md')
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, '¬ª ÿ¢€åÿØ€å ÿ¥ŸÖÿß : [ `'..msg.sender_user_id_..'` ]\n¬ª ÿ¢€åÿØ€å ⁄Øÿ±ŸàŸá : [ `'..msg.chat_id_..'` ]\n¬ª ÿ≥ÿ∑ÿ≠ ÿØÿ≥ÿ™ÿ±ÿ≥€å : [ '..t..' ]\n¬ª ÿ™ÿπÿØÿßÿØ ÿßÿÆÿ∑ÿßÿ± Ÿáÿß€å ÿ¥ŸÖÿß : [ `'..nwarn ..'` ]\n‚Ü´ ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿ¥ŸÖÿß : [ `'..msgs..'` ]\n‚Ü´ ŸÖŸÇÿßŸÖ ÿ¥ŸÖÿß : [ '..rank..' ]\n\n', 1, 'md')
end
end
----------------------------------------------------------------------------
if text and text:match('^bot rules$') or text:match("^ŸÇŸàÿßŸÜ€åŸÜ ÿ±ÿ®ÿßÿ™$") then

text = [[
ŸÇŸàÿßŸÜ€åŸÜ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ±ÿ®ÿßÿ™ ÿ±ÿßÿØ ! üìö


ŸÑÿ∑ŸÅÿß ŸÇŸàÿßŸÜ€åŸÜ ÿ≤€åÿ± ÿ±ÿß ÿÆŸàÿßŸÜÿØŸá Ÿà ÿ≥Ÿæÿ≥ ÿ±ÿ®ÿßÿ™ ÿ±ÿß ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ ÿØÿ± ÿ∫€åÿ± ÿß€åŸÜ ÿµŸàÿ±ÿ™ ÿßÿ≤ ÿπŸàÿßŸÇÿ® ÿ¢ŸÜ ŸÖÿπÿ∞Ÿàÿ±€åŸÖ !

1- ÿßÿ≤ ŸÜÿµÿ® ÿ±ÿ®ÿßÿ™ ÿØÿ± ⁄Øÿ±ŸàŸá Ÿáÿß€å ŸæŸàÿ±ŸÜ , ÿ∂ÿØ ÿÆÿØÿß , ÿ≥€åÿßÿ≥€å ÿ¨ÿØÿß ÿÆŸàÿØÿØÿßÿ±€å ⁄©ŸÜ€åÿØ ÿØÿ± ÿµŸàÿ±ÿ™ ŸÖÿ¥ÿßŸáÿØŸá ÿ®ÿ±ÿÆŸàÿ±ÿØ ÿÆŸàÿßŸáÿØ ÿ¥ÿØ !
2- ÿßÿ≤ ÿ™⁄©ÿ±ÿßÿ± ÿØÿ≥ÿ™Ÿàÿ±ÿßÿ™ ÿÆŸàÿØÿØÿßÿ±€å ⁄©ŸÜ€åÿØ !
3- ÿßÿ≤ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ±ÿ®ÿßÿ™ ÿØÿ± ⁄Øÿ±ŸàŸá Ÿáÿß€å€å ⁄©Ÿá ÿ±ÿ®ÿßÿ™ Ÿáÿß€å ÿØ€å⁄Øÿ± ÿ≠ÿ∂Ÿàÿ± ÿØÿßÿ±ÿØ ÿÆŸàÿØÿØÿßÿ±€å ⁄©ŸÜ€åÿØ Ÿà €åÿß ÿ¢ŸÜ ÿ±ÿß ÿ®ÿß ÿ≥ÿß€åÿ± ÿ±ÿ®ÿßÿ™ Ÿáÿß€å ÿÆŸàÿØ ÿ≥ÿßÿ≤ ⁄Øÿßÿ± ⁄©ŸÜ€åÿØ !
4- ÿ¥ÿ±ÿ∑ ÿ±ÿß€å⁄ØÿßŸÜ ÿ®ŸàÿØŸÜ ÿ±ÿ®ÿßÿ™ ÿ™ÿ®ŸÑ€åÿ∫ Ÿáÿß€å ŸÖÿ≠ÿØŸàÿØ€å Ÿáÿ≥ÿ™ ⁄©Ÿá ÿßÿ≤ ÿ≥ŸÖÿ™ ÿ±ÿ®ÿßÿ™ ÿßÿ±ÿ≥ÿßŸÑ ŸÖ€åÿ¥ŸàÿØ Ÿà ÿ™ŸÜŸáÿß ÿÆŸàÿßÿ≥ÿ™Ÿá ŸÖÿß ŸÖÿßŸÜÿØ⁄Øÿßÿ±€å ÿ™ÿ®ŸÑ€åÿ∫ ÿØÿ± ⁄Øÿ±ŸàŸá ÿ¥ŸÖÿßÿ≥ÿ™ !
5- ÿØÿ± ÿµŸàÿ±ÿ™ ŸÅÿπÿßŸÑ ÿ®ŸàÿØŸÜ ÿ≠ÿßŸÑÿ™ ÿπÿ∂Ÿà€åÿ™ ÿßÿ¨ÿ®ÿßÿ±€å ÿ≠ÿ™ŸÖÿß ÿØÿ± ⁄©ÿßŸÜÿßŸÑ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ±ÿßÿØ ÿπÿ∂Ÿà ÿ¥Ÿà€åÿØ !

ÿØÿ± ÿµŸàÿ±ÿ™ ÿ®ÿ±Ÿàÿ≤ Ÿáÿ±⁄ØŸàŸÜŸá ŸÖÿ¥⁄©ŸÑ ÿØÿ≥ÿ™Ÿàÿ± `Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å` ÿ±ÿß ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜ€åÿØ ! üí∏
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'md')
end

if text and text:match('^lhelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ŸÇŸÅŸÑ€å$") then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÇŸÅŸÑ€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

ÿ®ÿ±ÿß€å ŸÇŸÅŸÑ ⁄©ÿ±ÿØŸÜ ÿßÿ≤ ⁄©ŸÑŸÖŸá lock ÿØÿ± ÿßÿ®ÿ™ÿØÿß€å Ÿáÿ± ⁄©ŸÑŸÖŸá ⁄©Ÿá ÿØÿ± ÿ≤€åÿ± ŸÜÿßŸÖ ÿ®ÿ±ÿØŸá ŸÖ€åÿ¥ŸàÿØ Ÿà ÿ®ÿ±ÿß€å ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ÿßÿ≤ ⁄©ŸÑŸÖŸá unlock ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ !

[ link | forward | username | tag | inline | tgservice | persian | English | pin | bot | emoji | cmd | selfivideo | join | fosh | tabchi | tgservice | photo | video | voice | gif | music | file | reply | text | contact | sticker | game ]

ÿ®ÿ±ÿß€å ŸÖÿ´ÿßŸÑ ÿ®ÿ±ÿß€å ŸÇŸÅŸÑ ⁄©ÿ±ÿØŸÜ ŸÑ€åŸÜ⁄© :

lock link 

ÿ®ÿ±ÿß€å ÿ®ÿßÿ≤ ⁄©ÿ±ÿØŸÜ ŸÇŸÅŸÑ ŸÑ€åŸÜ⁄© :

unlock link

‚ö†Ô∏è ŸÅŸÇÿ∑ ŸÖÿ™ŸÜ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ™ÿß€åŸæ ⁄©ŸÜ€åÿØ !

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text and text:match('^mchelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿ≠ÿØŸàÿØ€åÿ™€å$") then

text = [[
Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿ≠ÿØŸàÿØ€åÿ™€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚áù silent
‚Ü´ ÿ≥ÿß⁄©ÿ™ ⁄©ÿ±ÿØŸÜ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ±
‚áù unsilent
‚Ü´ ÿØÿ±ÿßŸàÿ±ÿØŸÜ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿßÿ≤ ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™

‚Ü´ ÿ™ŸÜÿ∏€åŸÖ ÿ™ÿπÿØÿßÿØ ÿßÿÆÿ∑ÿßÿ±
‚áù setwarn kick
‚áù setwarn ban
‚áù setwarn mute
‚Ü´ ÿ™ŸÜÿ∏€åŸÖ ÿ≠ÿßŸÑÿ™ ÿßÿÆÿ∑ÿßÿ±
‚áù warn [reply]
‚Ü´ ÿ®ÿ±ÿß€å ÿØÿßÿØŸÜ ÿßÿÆÿ∑ÿßÿ±
‚áù unwarn [reply]
‚Ü´ ÿ®ÿ±ÿß€å ÿ≠ÿ∞ŸÅ ÿßÿÆÿ∑ÿßÿ± ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ±

‚áù kick
‚Ü´ ÿßÿÆÿ±ÿßÿ¨ ŸÅÿ±ÿØ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿßÿ≤ ⁄Øÿ±ŸàŸá
‚áù ban
‚Ü´ ÿ®ŸÜ ⁄©ÿ±ÿØŸÜ ŸÅÿ±ÿØ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿßÿ≤ ⁄Øÿ±ŸàŸá
‚áù unban
‚áù filter
‚Ü´ ŸÅ€åŸÑÿ™ÿ± ⁄©ÿ±ÿØŸÜ
‚áù unfilter
‚Ü´ ÿØÿ± ÿßŸàÿ±ÿØŸÜ ÿßÿ≤ ÿ≠ÿßŸÑÿ™ ŸÅ€åŸÑÿ™ÿ±
‚áù automuteall enable
‚Ü´ ŸÅÿπÿßŸÑ ÿ≥ÿßÿ≤€å ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ÿÆŸàÿØ⁄©ÿßÿ±
‚áù automuteall disable
‚Ü´ ÿ∫€åÿ± ŸÅÿπÿßŸÑ ÿ≥ÿßÿ≤€å ÿ≥ÿß€åŸÑŸÜÿ™ ÿÆŸàÿØ⁄©ÿßÿ±
‚áù automuteall start-stop
_ÿ®ÿÆÿ¥ ŸÖÿ±ÿ®Ÿàÿ∑ ÿ®Ÿá ÿ™ŸÜÿ∏€åŸÖ Ÿæ€åÿßŸÖ Ÿáÿß€å ŸÖ⁄©ÿ±ÿ± Ÿà ÿßÿ≥ŸæŸÖ_
‚áù setfloodmax [1-40]
‚Ü´ ÿ™ŸÜÿ∏€åŸÖ ŸÖ€åÿ≤ÿßÿ±ŸÜ ŸÅŸÑŸàÿØ
‚Ü´ ÿ®Ÿá ÿ¨ÿß€å [1-40] ÿπÿØÿØ ÿ®⁄Øÿ≤ÿßÿ±€åÿØ
_ÿ®ÿÆÿ¥ ÿ™ŸÜÿ∏€åŸÖ ÿ≤ŸÖÿßŸÜ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ŸÖ⁄©ÿ±ÿ±_
‚áù setfloodtime [1-30]
‚Ü´ ÿ™ŸÜÿ∏€åŸÖ ÿ≤ŸÖÿßŸÜ ŸÅŸÑŸàÿØ
‚áù lock flood mute
‚Ü´ ÿ®ÿß ŸÅÿπÿßŸÑ ÿ≥ÿßÿ≤€å ÿß€åŸÜ ŸÅÿ±ÿß€åŸÜÿØ ÿ¥ÿÆÿµ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜŸÜÿØŸá ÿØÿ± ÿ≠ÿßŸÑÿ™ ÿ≥ÿß€åŸÑŸÜÿ™ ŸÇÿ±ÿßÿ± ŸÖ€å⁄Ø€åÿ±ÿØ
‚áù lock flood ban
‚Ü´ ÿ®ÿß ŸÅÿπÿßŸÑ ÿ≥ÿßÿ≤€å ÿß€åŸÜ ŸÅÿ±ÿß€åŸÜÿØ ÿ¥ÿÆÿµ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜŸÜÿØŸá ÿßÿÆÿ±ÿßÿ¨ ŸÖ€åÿ¥ŸàÿØ
‚áù lock flood kick
‚Ü´ ÿ®ÿß ŸÅÿπÿßŸÑ ÿ≥ÿßÿ≤€å ÿß€åŸÜ ŸÅÿ±ÿß€åŸÜÿØ ÿ¥ÿÆÿµ ÿßÿ±ÿ≥ÿßŸÑ ⁄©ŸÜŸÜÿØŸá ÿ®Ÿá ÿµŸàÿ±ÿ™ ⁄©ŸÑ€å ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿßÿÆÿ±ÿßÿ¨ 

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[ 
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text and text:match('^mhelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿØ€åÿ±€åÿ™€å$") then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÖÿØ€åÿ±€åÿ™€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚áù setvip
‚Ü´ ÿ™ŸÜÿ∏€åŸÖ ŸÅÿ±ÿØ ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ⁄©ÿßÿ±ÿ®ÿ± Ÿà€å⁄òŸá

‚áù remvip

‚Ü´ ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿØ ÿßÿ≤ ŸÖŸÇÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ± Ÿà€å⁄òŸá
‚áù Viplist

‚áù ruadmin
‚Ü´ÿ¢⁄ØÿßŸá€å ÿßÿ≤ ÿßÿØŸÖ€åŸÜ ÿ®ŸàÿØŸÜ €åÿß ŸÜÿ®ŸàÿØŸÜ ÿ±ÿ®ÿßÿ™ 

‚áù banlist
‚Ü´ ŸÜŸÖÿß€åÿ¥ ÿ®ŸÜ ŸÑ€åÿ≥ÿ™ ⁄Øÿ±ŸàŸá

‚áù promotelist
‚Ü´ ŸÜŸÖÿß€åÿ¥ ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ± Ÿáÿß€å ÿ±ÿ®ÿßÿ™

‚áù ownerlist
‚áù promote
‚Ü´ÿØÿßÿØŸÜ ŸÖŸÇÿßŸÖ ÿ®Ÿá ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ±
‚áù demote
‚Ü´ ⁄Øÿ±ŸÅÿ™ŸÜ ŸÖŸÇÿßŸÖ ÿßÿ≤ ⁄©ÿßÿ±ÿ®ÿ± ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ±
‚áù config
‚Ü´ ÿßÿ±ÿ™ŸÇÿß ÿ™ŸÖÿßŸÖ€å ÿßÿØŸÖ€åŸÜ Ÿáÿß€å  ⁄Øÿ±ŸàŸá ÿ®Ÿá ÿßÿØŸÖ€åŸÜ ÿ±ÿ®ÿßÿ™

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[ 
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text and text:match('^cleanhelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿß⁄©ÿ≥ÿßÿ≤€å$") then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚áù Cleanvip
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ Ÿà€å⁄òŸá
‚áù clean modlist
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ Ÿæÿ±ŸàŸÖŸàÿ™ Ÿáÿß
‚áù clean ownerlist
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ÿßŸàŸÜÿ± Ÿáÿß€å ⁄Øÿ±ŸàŸá

‚áù clean banlist
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ®ŸÜ ŸÑ€åÿ≥ÿ™ ⁄Øÿ±ŸàŸá
‚áù clean promotelist
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ŸÑ€åÿ≥ÿ™ ŸÖÿØ€åÿ±Ÿáÿß

‚áù del [1-100]
‚Ü´ ÿ≠ÿ∞ŸÅ Ÿæ€åÿßŸÖ ÿ™Ÿàÿ≥ÿ∑ ÿ±ÿ®ÿßÿ™

‚áù clean delete
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿßŸÅÿ±ÿßÿØ ÿØ€åŸÑ€åÿ™ ÿß⁄©ÿßŸÜÿ™ 

‚áù clean deactive
‚Ü´ Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿπÿ∂Ÿà Ÿáÿß€å ÿ∫€åÿ± ŸÅÿπÿßŸÑ ÿØÿ± ⁄Øÿ±ŸàŸá :
ŸÅÿ±ÿß€åÿØŸÜÿØ Ÿáÿß€å ÿ≠ÿ∞ŸÅ€å :

‚áù clean [ banlist | silentlist | modlist | blocklist | filterlist | deleted | bots ]

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[ 
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end

if text and text:match('^memhelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ÿπŸÖŸàŸÖ€å$") then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ÿπŸÖŸàŸÖ€å ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚áù ping
‚Ü´ ÿß⁄ØÿßŸá€å ÿßÿ≤ ÿßŸÜŸÑÿß€åŸÜ€å ÿ±ÿ®ÿßÿ™‚Ä¢

ÿßÿ≤ ÿØÿ≥ÿ™Ÿàÿ± "ÿ±ÿ®ÿßÿ™" ŸáŸÖ ŸÖ€åÿ™ŸàÿßŸÜ€åÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜ€åÿØ !

‚áù link
‚Ü´ ÿØÿ±€åÿßŸÅÿ™ ŸÑ€åŸÜ⁄© ⁄Øÿ±ŸàŸá

‚áù id | me
‚Ü´ ŸÜŸÖÿß€åÿ¥ ŸÖÿ¥ÿÆÿµÿßÿ™ ÿ¥ŸÖÿß

‚áù rules
‚Ü´ ŸÇŸàÿßŸÜ€åŸÜ ⁄Øÿ±ŸàŸá‚Ä¢

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[  
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text and text:match('^funhelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ŸÅÿßŸÜ$") then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ŸÅÿßŸÜ ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚Ü´ ÿ®ÿ±ÿß€å ÿ¢⁄ØÿßŸá€å ÿßÿ≤ ŸÖÿØÿ™ ÿ≤ŸÖÿßŸÜ ÿ®ÿßŸÇ€å ŸÖÿßŸÜÿØŸá ÿ™ÿß ÿπ€åÿØ :

‚áù eid

‚Ü´ ÿØÿ±€åÿßŸÅÿ™ ÿ¥ŸÖÿßÿ±Ÿá ÿ≥ÿßÿ≤ŸÜÿØŸá ÿ±ÿ®ÿßÿ™ :

‚áù share | dev

‚Ü´  ÿØÿ±€åÿßŸÅÿ™ ŸÑ€åŸÜ⁄© ÿØ€åŸÑ€åÿ™ ÿß⁄©ÿßŸÜÿ™ :

‚áù del acc

‚Ü´ ÿØÿ±€åÿßŸÅÿ™ ÿ™ÿßÿ±€åÿÆ Ÿà ÿ≥ÿßÿπÿ™ :

‚áù date

‚Ü´ ÿØÿ±€åÿßŸÅÿ™ Ÿàÿ∂ÿπ€åÿ™ ÿ¢ÿ® Ÿà ŸáŸàÿß€å ÿ¥Ÿáÿ± ÿÆŸàÿØ :

‚áù weather city |
ŸÖÿ´ÿßŸÑ :

‚áù weather tehran

⁄©ÿßŸÜÿßŸÑ ŸÖÿß :

]] ..botchannel.. [[  
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text and text:match('^sudohelp$') or text:match("^ÿ±ÿßŸáŸÜŸÖÿß€å ÿ≥ŸàÿØŸà$") and is_sudo(msg) then

text = [[
ÿ®Ÿá ÿ®ÿÆÿ¥ ÿ±ÿßŸáŸÜŸÖÿß€å ÿ≥ŸàÿØŸà ÿ±ÿ®ÿßÿ™ ÿßÿ®ŸÑ€åÿµ ÿÆŸàÿØ ÿ¢ŸÖÿØ€åÿØ ! üñå

ŸÑÿ∑ŸÅÿß ÿ®ÿÆÿ¥ ŸÖŸàÿ±ÿØ ŸÜÿ∏ÿ± ÿÆŸàÿØ ÿ±ÿß ÿ®ÿπÿØ ÿßÿ≤ ÿß€åŸÜ ŸÖÿ™ŸÜ ÿ®ŸÜŸà€åÿ≥€åÿØ :

‚Ü´ ÿØÿ±€åÿßŸÅÿ™ ÿ¢ŸÖÿßÿ± ÿ±ÿ®ÿßÿ™ :

‚áù stats

‚Ü´ ÿ±ÿßŸá ÿßŸÜÿØÿßÿ≤€å ŸÖÿ¨ÿØÿØ ÿ±ÿ®ÿßÿ™ :
‚áù reload

‚Ü´ ÿ¥ŸÖÿßÿ±ÿ¥ ŸÖÿ¨ÿØÿØ ÿ¢ŸÖÿßÿ± :

‚áù reset stats
‚áù reset allmsgs
‚áù reset pvmsgs
‚áù reset gpsmsgs
‚áù reset sgpsmsgs
‚áù reset pv
‚áù reset gps
‚áù reset sgps

‚Ü´ ÿßÿ±ÿ≥ÿßŸÑ Ÿæ€åÿßŸÖ ÿ®Ÿá ⁄Øÿ±ŸàŸá Ÿáÿß :

‚áù fwd all | pv | sgps | gps

‚Ü´ ÿÆÿßÿ±ÿ¨ ⁄©ÿ±ÿØŸÜ ÿ±ÿ®ÿßÿ™ ÿßÿ≤ ⁄Øÿ±ŸàŸá :

‚áù leave

‚Ü´ €åÿßÿØÿØÿßÿ¥ÿ™ ÿ®ÿ±ÿØÿßÿ±€å :

‚áù note (text)

‚Ü´ ÿØÿ±€åÿßŸÅÿ™ ŸÖÿ™ŸÜ €åÿßÿØÿØÿßÿ¥ÿ™ :

‚áù getnote
]]
bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
-----------------------------------------------------------------------------
if text:match("^[Nn]ote (.*)$") or text:match("^€åÿßÿØÿØÿßÿ¥ÿ™ (.*)$") and is_sudo(msg) then
          local txt = {
            string.match(text, "^([Nn]ote) (.*)$")
          }
          database:set("Sudo:note" .. msg.sender_user_id_, txt[2])
          if database:get("lang:gp:" .. msg.chat_id_) then
            bot.sendMessage(msg.chat_id_, msg.id_, 1, "‚Ä¢ Your note has been saved !", 1, "md")
          else
            bot.sendMessage(msg.chat_id_, msg.id_, 1, "Ÿæ€åÿßŸÖ €åÿßÿØÿØÿßÿ¥ÿ™ ÿ¥ŸÖÿß ÿ∞ÿÆ€åÿ±Ÿá ÿ¥ÿØ !", 1, "md")
          end
        end
        if text:match("^[Gg]etnote$") or text:match("^€åÿßÿØÿØÿßÿ¥ÿ™ Ÿáÿß$") and is_sudo(msg) then
          local note = database:get("Sudo:note" .. msg.sender_user_id_)
          bot.sendMessage(msg.chat_id_, msg.id_, 1, note, 1, nil)
        end
------------------------------------------------------------------------------		
		local idf = tostring(msg.chat_id_)
    if idf:match("-100(%d+)") then
      local chatname = chat and chat and chat.title_
      local svgroup = "group:Name" .. msg.chat_id_
      if chat and chatname then
        database:set(svgroup, chatname)
      end
    end
	local text = msg.content_.text_:gsub('Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿØ€åŸÑ€åÿ™ ÿß⁄©ÿßŸÜÿ™','clean delete')
  	if text:match("^[Cc][Ll][Ee][Aa][Nn] [Dd][Ee][Ll][Ee][Tt][Ee]$") and is_mod(msg) then
	local txt = {string.match(text, "^([Cc][Ll][Ee][Aa][Nn] [Dd][Ee][Ll][Ee][Tt][Ee])$")}
local function getChatId(chat_id)
  local chat = {}
  local chat_id = tostring(chat_id)
  if chat_id:match('^-100') then
local channel_id = chat_id:gsub('-100', '')
chat = {ID = channel_id, type = 'channel'}
  else
local group_id = chat_id:gsub('-', '')
chat = {ID = group_id, type = 'group'}
  end
  return chat
end
  local function check_delete(arg, data)
for k, v in pairs(data.members_) do
local function clean_cb(arg, data)
if not data.first_name_ then
bot.changeChatMemberStatus(msg.chat_id_, data.id_, "Kicked")
end
end
bot.getUser(v.user_id_, clean_cb)
end
if database:get('bot:lang:'..msg.chat_id_) then
text = '_> delete accounts has been_ *Cleaned*'
else
text = 'ÿ™ŸÖÿßŸÖ€å ÿßŸÅÿ±ÿßÿØ ÿØ€åŸÑ€åÿ™ ÿß⁄©ÿßŸÜÿ™ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ≠ÿ∞ŸÅ ÿ¥ÿØŸÜÿØ !'
end
	bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'md')
 end
  tdcli_function ({ID = "GetChannelMembers",channel_id_ = getChatId(msg.chat_id_).ID,offset_ = 0,limit_ = 5000}, check_delete, nil)
  end

----------------------------------------------------------------------------
if text and text:match("^[Pp]ing$") or text:match("^ÿßŸÜŸÑÿß€åŸÜ€å$") then
text = 'Rad Free Bot is Online Every Time :D'
SendMetion(msg.chat_id_, msg.sender_user_id_, msg.id_, ''..text..'' , 0, string.len(text))
end
----------------------------------------------------------------------------
if text == "id" or text == "Id" or text == "ÿ¢€åÿØ€å" or text == "ÿß€åÿØ€å" or text == "ID" then
if check_user(msg) then
if msg.reply_to_message_id_ == 0 then
local rank =  database:get('ranks:'..msg.sender_user_id_) or 'ŸÖŸÇÿßŸÖ€å ÿ®ÿ±ÿß€å ÿ¥ŸÖÿß ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™ !'
local gmsgs = database:get(SUDO..'groupmsgkk:'..msg.chat_id_..':')
local msgs = database:get(SUDO..'total:messages:'..msg.chat_id_..':'..msg.sender_user_id_)
local function getpro(extra, result, success)
if result.photos_[0] then
if database:get('lang:gp:'..msg.chat_id_) then
sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, result.photos_[0].sizes_[1].photo_.persistent_id_,'‚Ü´ Your ID : [ '..msg.sender_user_id_..' ]\n‚Ü´ Your msg : [ '..msgs..' ]\n‚û¢ Ch : '..botchannel..'', 1, 'md')
else
sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, result.photos_[0].sizes_[1].photo_.persistent_id_,'‚Ü´ ÿ¢€åÿØ€å ÿ¥ŸÖÿß : [ '..msg.sender_user_id_..' ]\n‚Ü´ ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿ¥ŸÖÿß : [ '..msgs..' ]\n‚û¢ Ch : '..botchannel..'', 1, 'md')
end
else
bot.sendMessage(msg.chat_id_, msg.id_, 1,'‚Ü´ Ÿæÿ±ŸàŸÅÿß€åŸÑ€å ÿ®ÿ±ÿß€å ÿ¥ŸÖÿß ÿ´ÿ®ÿ™ ŸÜÿ¥ÿØŸá ÿßÿ≥ÿ™!\n\n¬ª ÿ¢€åÿØ€å ÿ¥ŸÖÿß : ( '..msg.sender_user_id_..' )\n\n‚Ü´ ÿ¢€åÿØ€å ⁄Øÿ±ŸàŸá : ( '..msg.chat_id_..' )\n\n‚Ü´ ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ÿ¥ŸÖÿß : ( '..msgs..' )\n\n‚Ü´ ÿ™ÿπÿØÿßÿØ Ÿæ€åÿßŸÖ Ÿáÿß€å ⁄Øÿ±ŸàŸá : ( '..gmsgs..' )\n\n‚Ü´ ŸÖŸÇÿßŸÖ ÿ¥ŸÖÿß : ( '..rank..' )\n\n‚û¢ Ch : '..botchannel..'', 1, 'md')
end
end
tdcli_function ({
ID = "GetUserProfilePhotos",
user_id_ = msg.sender_user_id_,
offset_ = 0,
limit_ = 1
}, getpro, nil)
end
end
end
----------------------------------------------------------------------------
if text:match("^[Dd][Ee][Vv]$") or text:match("^ÿµÿßÿ≠ÿ® ÿ±ÿ®ÿßÿ™$") or text:match("^ÿ®ÿ±ŸÜÿßŸÖŸá ŸÜŸà€åÿ≥$") or text:match("^ÿ≥ŸàÿØŸà$") or text:match("^share$") then
sendContact(msg.chat_id_, msg.id_, 0, 1, nil, (380970279062), ("Mr >> Rad"), "", bot_id)
end
----------------------------------------------------------------------------
if text:match("^del acc$") or text:match("^delete account$") or text:match("^ÿØŸÑÿ™ ÿß⁄©ÿßŸÜÿ™$") or text:match("^ÿØ€åŸÑ ÿß⁄©$") or text:match("^ÿØ€åŸÑ ÿß⁄©ÿßŸÜÿ™$") then
local text =  [[
üóëüóë ŸÑ€åŸÜ⁄© ÿØ€åŸÑÿ™ ÿß⁄©ÿßŸÜÿ™ ÿ¥ŸÖÿß ÿ≥ÿßÿÆÿ™Ÿá ÿ¥ÿØ !

"https://telegram.org/deactivate"

‚ö†Ô∏è ÿßÿÆÿ∑ÿßÿ± : ÿ™Ÿàÿ¨Ÿá ÿØÿßÿ¥ÿ™Ÿá ÿ®ÿßÿ¥€åÿØ ⁄©Ÿá ÿß€åŸÜ ŸÑ€åŸÜ⁄© ÿ®ÿ±ÿß€å ÿ≠ÿ∞ŸÅ ÿß⁄©ÿßŸÜÿ™ ⁄©ÿßÿ±ÿ®ÿ±€å ÿ¥ŸÖÿß ÿØÿ± ÿ™ŸÑ⁄Øÿ±ÿßŸÖ ŸÖ€åÿ®ÿßÿ¥ÿØ !

üìö ÿßÿ®ÿ™ÿØÿß ÿ®ÿ±Ÿà€å ŸÑ€åŸÜ⁄© ÿ≤€åÿ± ⁄©ŸÑ€å⁄© ⁄©ÿ±ÿØŸá Ÿà Ÿàÿßÿ±ÿØ ÿ≥ÿß€åÿ™ ÿ¥ÿØŸá Ÿà ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÑŸÅŸÜ ÿÆŸàÿØ ÿ±ÿß ÿ®ÿß ⁄©ÿØ ⁄©ÿ¥Ÿàÿ± Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ !

ÿ®ÿ±ÿß€å ŸÖÿ´ÿßŸÑ : 
+9809036091185

ÿ≥Ÿæÿ≥ ŸÖŸÜÿ™ÿ∏ÿ± ⁄©ÿØ ÿßÿ≤ ÿ≥ŸÖÿ™ ÿ™ŸÑ⁄Øÿ±ÿßŸÖ ÿ®ÿßÿ¥€åÿØ ÿ≥Ÿæÿ≥ ⁄©ÿØ ÿÆŸàÿØ ÿ±ÿß ⁄©Ÿæ€å ⁄©ÿ±ÿØŸá Ÿà ÿØÿ± ÿ≥ÿß€åÿ™ Ÿàÿßÿ±ÿØ ⁄©ŸÜ€åÿØ !

ŸÑÿ≠ÿ∏ÿßÿ™ ÿÆŸàÿ¥€å ÿ±ÿß ÿØÿ± ⁄©ŸÜÿßÿ± ÿÆÿßŸÜŸàÿßÿØŸá ÿ®ÿ±ÿß€å ÿ¥ŸÖÿß ÿ¢ÿ±ÿ≤Ÿà ŸÖŸÜÿØ€åŸÖ !

]]

bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
if text:match("^Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å$") or text:match("^support$") then
local text =  [[
üáÆüá∑ ÿ®Ÿá ÿ®ÿÆÿ¥ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ±ÿ®ÿßÿ™ ÿ±ÿßÿØ ÿÆŸàÿ¥ ÿ¢ŸÖÿØ€åÿØ !

ŸÑÿ∑ŸÅÿß ŸÇÿ®ŸÑ ÿßÿ≤ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿØÿ± Ÿáÿ±  €å⁄© ÿßÿ≤ ÿ®ÿÆÿ¥ Ÿáÿß€å ÿ≤€åÿ± ŸÇŸàÿßŸÜ€åŸÜ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ±ÿ®ÿßÿ™ ÿ±ÿß ŸÖÿ±Ÿàÿ± ⁄©ŸÜ€åÿØ !

‚ú™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ ÿ®ÿ±ÿß€å ÿ±€åŸæŸàÿ±ÿ™€å Ÿáÿß :

‚û• ]] ..pvresan.. [[

‚ú™ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ ÿ¢ŸÜŸÑÿß€åŸÜ Ÿà ŸæÿØ€åÿØ ÿ¢Ÿàÿ±ŸÜÿØŸá ÿ±ÿ®ÿßÿ™  :

‚û• ]] ..sudoid..[[

‚ú™ ⁄Øÿ±ŸàŸá Ÿà ÿßŸÜÿ¨ŸÖŸÜ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿ±ÿ®ÿßÿ™ :

‚û• ]] ..supportgp.. [[


‚ú™ ÿßŸæÿ±ÿßÿ™Ÿàÿ± ŸÖÿ¥⁄©ŸÑÿßÿ™ :

‚û• ]] ..sudophone.. [[

‚ú™ ŸÖÿßÿ±ÿß ÿØÿ± ⁄©ÿßŸÜÿßŸÑ ÿ≤€åÿ± ÿØŸÜÿ®ÿßŸÑ ⁄©ŸÜ€åÿØ :

‚û• ]] ..botchannel.. [[

]]

bot.sendMessage(msg.chat_id_, msg.id_, 0,text, 1, 'html')
end
---------------------------------------------------------------
----------------------------------------------------------------------------
local text = msg.content_.text_:gsub('Ÿæÿß⁄©ÿ≥ÿßÿ≤€å ÿ∫€åÿ±ŸÅÿπÿßŸÑ','clean deactive')
  	if text:match("^[Cc][Ll][Ee][Aa][Nn] [Dd][Ee][Aa][Cc][Tt][Ii][Vv][Ee]$") and is_mod(msg) then
	local txt = {string.match(text, "^([Cc][Ll][Ee][Aa][Nn] [Dd][Ee][Aa][Cc][Tt][Ii][Vv][Ee])$")}
local function getChatId(chat_id)
  local chat = {}
  local chat_id = tostring(chat_id)
  if chat_id:match('^-100') then
local channel_id = chat_id:gsub('-100', '')
chat = {ID = channel_id, type = 'channel'}
  else
local group_id = chat_id:gsub('-', '')
chat = {ID = group_id, type = 'group'}
  end
  return chat
end
  local function check_deactive(arg, data)
for k, v in pairs(data.members_) do
local function clean_cb(arg, data)
if data.type_.ID == "UserTypeGeneral" then
if data.status_.ID == "UserStatusEmpty" then
bot.changeChatMemberStatus(msg.chat_id_, data.id_, "Kicked")
end
end
end
bot.getUser(v.user_id_, clean_cb)
end
if database:get('bot:lang:'..msg.chat_id_) then
text = 'deactive users has been cleaned !'
else
text = 'ÿßÿπÿ∂ÿß€å ÿ∫€åÿ± ŸÅÿπÿßŸÑ ÿßÿ≤ ⁄Øÿ±ŸàŸá ÿ≠ÿ∞ŸÅ ÿ¥ÿØŸÜÿØ !'
end
	bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'md')
 end
  tdcli_function ({ID = "GetChannelMembers",channel_id_ = getChatId(msg.chat_id_).ID,offset_ = 0,limit_ = 5000}, check_deactive, nil)
  end
----------------------------------------------------------------------------
if text:match("^[Rr]uadmin$") and is_sudo(msg) or text:match("^ÿßÿØŸÖ€åŸÜ€å$") and is_mod(msg) then
if msg.can_be_deleted_ == true then
if database:get("lang:gp:" .. msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, "I'm *Admin* !", 1, "md")
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, "ŸÖŸÜ ÿßÿØŸÖ€åŸÜ Ÿáÿ≥ÿ™ŸÖ !", 1, "md")
end
elseif database:get("lang:gp:" .. msg.chat_id_) then
bot.sendMessage(msg.chat_id_, msg.id_, 1, "I'm *Not Admin* !", 1, "md")
else
bot.sendMessage(msg.chat_id_, msg.id_, 1, "ŸÖŸÜ ÿßÿØŸÖ€åŸÜ ŸÜ€åÿ≥ÿ™ŸÖ !", 1, "md")
end
end
----------------------------------------------------------------------------

----------------------------------------------------------------------------
if text and text:match("^date$") then
local url , res = http.request('http://probot.000webhostapp.com/api/time.php/')
if res ~= 200 then return bot.sendMessage(msg.chat_id_, msg.id_, 1, '> Error 404 :|', 1, 'html')
end
local jdat = json:decode(url)
if jdat.L == "0" then
jdat_L = 'ÿÆ€åÿ±'
elseif jdat.L == "1" then
jdat_L = 'ÿ®ŸÑŸá'
end
local text = '‚Ü´ ÿ≥ÿßÿπÿ™ : <code>'..jdat.Stime..'</code>\n\n‚Ü´ ÿ™ÿßÿ±€åÿÆ : <code>'..jdat.FAdate..'</code>\n\n‚Ü´ ÿ™ÿπÿØÿßÿØ ÿ±Ÿàÿ≤ Ÿáÿß€å ŸÖÿßŸá ÿ¨ÿßÿ±€å : <code>'..jdat.t..'</code>\n\n‚Ü´ ÿπÿØÿØ ÿ±Ÿàÿ≤ ÿØÿ± ŸáŸÅÿ™Ÿá : <code>'..jdat.w..'</code>\n\n‚Ü´ ÿ¥ŸÖÿßÿ±Ÿá €å ÿß€åŸÜ ŸáŸÅÿ™Ÿá ÿØÿ± ÿ≥ÿßŸÑ : <code>'..jdat.W..'</code>\n\n‚Ü´ ŸÜÿßŸÖ ÿ®ÿßÿ≥ÿ™ÿßŸÜ€å ŸÖÿßŸá : <code>'..jdat.p..'</code>\n\n‚Ü´ ÿ¥ŸÖÿßÿ±Ÿá €å ŸÖÿßŸá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.n..'</code>\n\n‚Ü´ ŸÜÿßŸÖ ŸÅÿµŸÑ : <code>'..jdat.f..'</code>\n\n‚Ü´ ÿ¥ŸÖÿßÿ±Ÿá €å ŸÅÿµŸÑ ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.b..'</code>\n\n‚Ü´ ÿ™ÿπÿØÿßÿØ ÿ±Ÿàÿ≤ Ÿáÿß€å ⁄Øÿ∞ÿ¥ÿ™Ÿá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.z..'</code>\n\n‚Ü´ ÿØÿ± ÿµÿØ ⁄Øÿ∞ÿ¥ÿ™Ÿá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.K..'</code>\n\n‚Ü´ ÿ™ÿπÿØÿßÿØ ÿ±Ÿàÿ≤ Ÿáÿß€å ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.Q..'</code>\n\n‚Ü´ ÿØÿ± ÿµÿØ ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.k..'</code>\n\n‚Ü´ ŸÜÿßŸÖ ÿ≠€åŸàÿßŸÜ€å ÿ≥ÿßŸÑ : <code>'..jdat.q..'</code>\n\n‚Ü´ ÿ¥ŸÖÿßÿ±Ÿá €å ŸÇÿ±ŸÜ Ÿáÿ¨ÿ±€å ÿ¥ŸÖÿ≥€å : <code>'..jdat.C..'</code>\n\n‚Ü´ ÿ≥ÿßŸÑ ⁄©ÿ®€åÿ≥Ÿá : <code>'..jdat_L..'</code>\n\n‚Ü´ ŸÖŸÜÿ∑ŸÇŸá €å ÿ≤ŸÖÿßŸÜ€å ÿ™ŸÜÿ∏€åŸÖ ÿ¥ÿØŸá : <code>'..jdat.e..'</code>\n\n‚Ü´ ÿßÿÆÿ™ŸÑÿßŸÅ ÿ≥ÿßÿπÿ™ ÿ¨ŸáÿßŸÜ€å : <code>'..jdat.P..'</code>\n\n‚Ü´ ÿßÿÆÿ™ŸÑÿßŸÅ ÿ≥ÿßÿπÿ™ ÿ¨ŸáÿßŸÜ€å ÿ®Ÿá ÿ´ÿßŸÜ€åŸá : <code>'..jdat.A..'</code>\n\n<b>‚û¢</b> Ch : '..botchannel..''
bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'html')
end
--------------------
if text and text:match("^[Ee]id$") then
local url , res = http.request('http://probot.000webhostapp.com/api/time.php/')
if res ~= 200 then return bot.sendMessage(msg.chat_id_, msg.id_, 1, '> Error 404 :|', 1, 'html')
end
local jdat = json:decode(url)
if jdat.L == "0" then
jdat_L = 'ÿÆ€åÿ±'
elseif jdat.L == "1" then
jdat_L = 'ÿ®ŸÑŸá'
end
local text = '‚Ä¢‚Ä¢ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ™⁄©ŸÖ€åŸÑ€å ÿπ€åÿØ ŸÜŸàÿ±Ÿàÿ≤\n\n‚Ä¢ ÿ™ÿπÿØÿßÿØ ÿ±Ÿàÿ≤ Ÿáÿß€å ⁄Øÿ∞ÿ¥ÿ™Ÿá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.z..'</code>\n‚Ä¢ ÿØÿ± ÿµÿØ ⁄Øÿ∞ÿ¥ÿ™Ÿá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.K..'</code>\n‚Ä¢ ÿ™ÿπÿØÿßÿØ ÿ±Ÿàÿ≤ Ÿáÿß€å ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá ÿ™ÿß ÿπ€åÿØ : <code>'..jdat.Q..'</code>\n‚Ä¢ ÿØÿ± ÿµÿØ ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá ÿßÿ≤ ÿ≥ÿßŸÑ : <code>'..jdat.k..'</code>\n\n<b>‚û¢</b> Ch : '..botchannel..''
bot.sendMessage(msg.chat_id_, msg.id_, 1, text, 1, 'html')
end
---------------------------------------------------------------------------------------------
if text and text:match("^([Ww][Ee][Aa][Tt][Hh][Ee][Rr]) (.*)$") or text:match("^(ŸáŸàÿß) (.*)$") then
MatchesEN = {text:match("^([Ww][Ee][Aa][Tt][Hh][Ee][Rr]) (.*)$")}; MatchesFA = {text:match("^(ŸáŸàÿß) (.*)$")}
Ptrn = MatchesEN[2] or MatchesFA[2]
local function temps(K)
local F = (K*1.8)-459.67
local C = K-273.15
return F,C
end

local url , res = http.request("http://api.openweathermap.org/data/2.5/weather?q="..URL.escape(Ptrn).."&appid=269ed82391822cc692c9afd59f4aabba")
if res ~= 200 then return end
if not url then
return
end
if not json:decode(url) then
return
end
local jtab = json:decode(url)
if jtab.name then
if jtab.weather[1].main == "Thunderstorm" then
status = "‚õàÿ∑ŸàŸÅÿßŸÜŸä"
elseif jtab.weather[1].main == "Drizzle" then
status = "üå¶ŸÜŸÖŸÜŸÖ ÿ®ÿßÿ±ÿßŸÜ"
elseif jtab.weather[1].main == "Rain" then
status = "üåßÿ®ÿßÿ±ÿßŸÜŸä"
elseif jtab.weather[1].main == "Snow" then
status = "üå®ÿ®ÿ±ŸÅŸä"
elseif jtab.weather[1].main == "Atmosphere" then
status = "üå´ŸÖŸá - ÿ∫ÿ®ÿßÿ≤ ÿ¢ŸÑŸàÿØ"
elseif jtab.weather[1].main == "Clear" then
status = "üå§Ô∏èÿµÿßŸÅ"
elseif jtab.weather[1].main == "Clouds" then
status = "‚òÅÔ∏èÿßÿ®ÿ±Ÿä"
elseif jtab.weather[1].main == "Extreme" then
status = "-------"
elseif jtab.weather[1].main == "Additional" then
status = "-------"
else
status = "-------"
end
local F1,C1 = temps(jtab.main.temp)
local F2,C2 = temps(jtab.main.temp_min)
local F3,C3 = temps(jtab.main.temp_max)
if jtab.rain then
rain = jtab.rain["3h"].." ŸÖŸäŸÑŸäŸÖÿ™ÿ±"
else
rain = "-----"
end
if jtab.snow then
snow = jtab.snow["3h"].." ŸÖŸäŸÑŸäŸÖÿ™ÿ±"
else
snow = "-----"
end
			today = "ŸÜÿßŸÖ ÿ¥Ÿáÿ± : *"..jtab.name.."*\n"
			.."⁄©ÿ¥Ÿàÿ± : *"..(jtab.sys.country or "----").."*\n"
			.."Ÿàÿ∂ÿπ€åÿ™ ŸáŸàÿß :\n"
			.."   `"..C1.."¬∞ ÿØÿ±ÿ¨Ÿá ÿ≥ÿßŸÜÿ™Ÿä⁄Øÿ±ÿßÿØ (ÿ≥ŸÑÿ≥ŸäŸàÿ≥)`\n"
			.."   `"..F1.."¬∞ ŸÅÿßÿ±ŸÜŸáÿßŸäÿ™`\n"
			.."   `"..jtab.main.temp.."¬∞ ⁄©ŸÑŸàŸäŸÜ`\n"
			.."ŸáŸàÿß "..status.." ŸÖŸäÿ®ÿßÿ¥ÿØ\n\n"
			.."ÿ≠ÿØÿßŸÇŸÑ ÿØŸÖÿßŸä ÿßŸÖÿ±Ÿàÿ≤: `C"..C2.."¬∞   F"..F2.."¬∞   K"..jtab.main.temp_min.."¬∞`\n"
			.."ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿØŸÖÿßŸä ÿßŸÖÿ±Ÿàÿ≤: `C"..C3.."¬∞   F"..F3.."¬∞   K"..jtab.main.temp_max.."¬∞`\n"
			.."ÿ±ÿ∑Ÿàÿ®ÿ™ ŸáŸàÿß: `"..jtab.main.humidity.."%`\n"
			.."ŸÖŸÇÿØÿßÿ± ÿßÿ®ÿ± ÿ¢ÿ≥ŸÖÿßŸÜ: `"..jtab.clouds.all.."%`\n"
			.."ÿ≥ÿ±ÿπÿ™ ÿ®ÿßÿØ: `"..(jtab.wind.speed or "------").." ŸÖÿ™ÿ± ÿ®ÿ± ÿ´ÿßŸÜ€åŸá`\n"
			.."ÿ¨Ÿáÿ™ ÿ®ÿßÿØ: `"..(jtab.wind.deg or "------").."¬∞ ÿØÿ±ÿ¨Ÿá`\n"
			.."ŸÅÿ¥ÿßÿ± ŸáŸàÿß: `"..(jtab.main.pressure/1000).." ÿ®ÿßÿ±(ÿßÿ™ŸÖÿ≥ŸÅÿ±)`\n"
			.."ÿ®ÿßÿ±ŸÜÿØ⁄ØŸä 3ÿ≥ÿßÿπÿ™ ÿßÿÆŸäÿ±: `"..rain.."`\n"
			.."ÿ®ÿßÿ±ÿ¥ ÿ®ÿ±ŸÅ 3ÿ≥ÿßÿπÿ™ ÿßÿÆŸäÿ±: `"..snow.."`\n\n"
			after = ""
			local res = http.request("http://api.openweathermap.org/data/2.5/forecast?q="..URL.escape(Ptrn).."&appid=269ed82391822cc692c9afd59f4aabba")
			local jtab = json:decode(res)
			for i=1,5 do
				local F1,C1 = temps(jtab.list[i].main.temp_min)
				local F2,C2 = temps(jtab.list[i].main.temp_max)
				if jtab.list[i].weather[1].main == "Thunderstorm" then
					status = "‚õàÿ∑ŸàŸÅÿßŸÜ€å"
				elseif jtab.list[i].weather[1].main == "Drizzle" then
					status = "üå¶ŸÜŸÖŸÜŸÖ ÿ®ÿßÿ±ÿßŸÜ"
				elseif jtab.list[i].weather[1].main == "Rain" then
					status = "üåßÿ®ÿßÿ±ÿßŸÜ€å"
				elseif jtab.list[i].weather[1].main == "Snow" then
					status = "üå®ÿ®ÿ±ŸÅ€å"
				elseif jtab.list[i].weather[1].main == "Atmosphere" then
					status = "üå´ŸÖŸá - ÿ∫ÿ®ÿßÿ≤ ÿ¢ŸÑŸàÿØ"
				elseif jtab.list[i].weather[1].main == "Clear" then
					status = "üå§Ô∏èÿµÿßŸÅ"
				elseif jtab.list[i].weather[1].main == "Clouds" then
					status = "‚òÅÔ∏èÿßÿ®ÿ±€å"
				elseif jtab.list[i].weather[1].main == "Extreme" then
					status = "-------"
				elseif jtab.list[i].weather[1].main == "Additional" then
					status = "-------"
				else
					status = "-------"
				end
				if i == 1 then
					day = "ŸÅÿ±ÿØÿß ŸáŸàÿß "
				elseif i == 2 then
					day = "Ÿæÿ≥ ŸÅÿ±ÿØÿß ŸáŸàÿß "
				elseif i == 3 then
					day = "3 ÿ±Ÿàÿ≤ ÿ®ÿπÿØ ŸáŸàÿß "
				elseif i == 4 then
					day ="4 ÿ±Ÿàÿ≤ ÿ®ÿπÿØ ŸáŸàÿß "
				elseif i == 5 then
					day = "5 ÿ±Ÿàÿ≤ ÿ®ÿπÿØ ŸáŸàÿß "
				end
				after = after.."- "..day..status.." ŸÖŸäÿ®ÿßÿ¥ÿØ. \nüî∫`C"..C2.."¬∞`  *-*  `F"..F2.."¬∞`\nüîª`C"..C1.."¬∞`  *-*  `F"..F1.."¬∞`\n"
			end
			Text = today.."Ÿàÿ∂ÿπŸäÿ™ ÿ¢ÿ® Ÿà ŸáŸàÿß ÿØÿ± ŸæŸÜÿ¨ ÿ±Ÿàÿ≤ ÿ¢ŸäŸÜÿØŸá:\n"..after
			bot.sendMessage(msg.chat_id_, msg.id_, 1, Text, 1, 'md')
		else
			Text = "ŸÖ⁄©ÿßŸÜ Ÿàÿßÿ±ÿØ ÿ¥ÿØŸá ÿµÿ≠€åÿ≠ ŸÜŸÖ€åÿ®ÿßÿ¥ÿØ."
			bot.sendMessage(msg.chat_id_, msg.id_, 1, Text, 1, 'md')
		end
	end
	-----------------------------------------------------------------

----------------------------------------------------------------------------
end -- end check mute
 -- edit and updated by : @MinuteMen
end -- end text
 -- edit and updated by : @MinuteMen
end  -- end is_supergroup
 -- edit and updated by : @MinuteMen
end -- end function
----------------------------------------------------------------------------
function tdcli_update_callback(data)
if (data.ID == "UpdateNewMessage") then
run(data.message_,data)
elseif (data.ID == "UpdateMessageEdited") then
data = data
local function edited_cb(extra,result,success)
run(result,data)
end
tdcli_function ({
ID = "GetMessage",
chat_id_ = data.chat_id_,
message_id_ = data.message_id_
}, edited_cb, nil)
elseif (data.ID == "UpdateOption" and data.name_ == "my_id") then
tdcli_function ({
ID="GetChats",
offset_order_="9223372036854775807",
offset_chat_id_=0,
limit_=20
}, dl_cb, nil)
end
end
---------------------------------------------------------------------------------------------
-- Begin
local function savePlug(txt, pname)
	name, text = pname, txt
	local file = io.open("./plugins/"..name..".lua", "w")
	file:write(text)
	file:flush()
	file:close()
end

local function run(msg, matches)
	if is_sudo(msg) then
		msg.text = msg.content_.text_
		local lenght = msg.text
		if lenght:len() >= 4088 then
			return '_Message is so BIG!_'
	    else
			function string:trim()
				return self:gsub("^%s*(.-)%s*$", "%1")
			end
			local pText = matches[1]
			local lenText = 1
			while lenText ~= 0 do
				pText = pText:trim()
				pText, lenText = pText:gsub('^!+','')
			end
			savePlug(pText, matches[2])
			return "*Plugin was Saved!*"
		end
	end
end

return { patterns = { "^[/#!][Pp][Ll][Uu][Gg][Ii][Nn] (.+) (.*)$" }, run = run }

-- END
-- By @To0fan
-- CHANNEL: @LuaError

--------------------Notice----------------------

-- Message Must Be Only Under 4088 Charecters --

------------------------------------------------
----------------------------------------------------------------------------
local function run(msg, matches)
  if is_sudo(msg) then
  local text = matches[1]
  local b = 1
  while b ~= 0 do
    text = text:trim()
    text,b = text:gsub('^!+','')
  end
  local name = matches[2]
  local file = io.open("./plugins/"..name..".lua", "w")
  file:write(text)
  file:flush()
  file:close()
  return "Done ;-)" 
end
end 
return {
  description = "a Usefull plugin for sudo !",  
  usage = "A plugins to add Another plugins to the server",
  patterns = {
    "^#addplug +(.+) (.*)$"
  },
  run = run
}
end
end
